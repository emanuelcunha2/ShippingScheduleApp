<Window x:Class="ShippingScheduleMVVM.Views.RecordWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        xmlns:viewmodels="clr-namespace:ShippingScheduleMVVM.ViewModels"
        xmlns:views="clr-namespace:ShippingScheduleMVVM.Views" 
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:Behaviors="clr-namespace:ShippingScheduleMVVM.Behaviours" xmlns:models="clr-namespace:ShippingScheduleMVVM.Models" xmlns:converters="clr-namespace:ShippingScheduleMVVM.Converters"
        d:DataContext="{d:DesignInstance Type=viewmodels:RecordWindowViewModel}"
        UseLayoutRounding="False" RenderOptions.BitmapScalingMode ="LowQuality" 
        WindowStyle="None" AllowsTransparency="True" 
        WindowState="{Binding WindowSettings.State, Mode=TwoWay}"
        Title="{Binding Path=WindowSettings.Name, Mode=TwoWay, FallbackValue='ThisRecordWindow'}" Background="{x:Null}" ResizeMode="NoResize"
        Top="{Binding Path=WindowSettings.Top, Mode=TwoWay}"
        Left="{Binding Path=WindowSettings.Left, Mode=TwoWay}"
        Height="{Binding Path=WindowSettings.Height, Mode=TwoWay}"
        Width="{Binding Path=WindowSettings.Width, Mode=TwoWay}"
        x:Name="ThisRecordWindow"
        IsEnabled="{Binding Path=WindowSettings.IsEnabled, Mode=TwoWay}"
        Visibility="{Binding Path=WindowSettings.Visibility, Mode=TwoWay}"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <models:BindingProxy x:Key="ScheduleManagement" Data="{Binding}"/>
        <converters:DateTimeConverter x:Key="DateTimeConverter" />
        <converters:BooleanNegationConverter x:Key="BooleanNegationConverter" />
    </Window.Resources>

    <Window.InputBindings>
        <KeyBinding Key="Esc"  Command="{Binding CloseWindow}" CommandParameter="{Binding ElementName=ThisRecordWindow}"/>
    </Window.InputBindings>
    <!-- Main Grid -->
    <Grid x:Name="MainGrid" MouseDown="Grid_MouseDown"  Height="520" Width="875" Background="{x:Null}" HorizontalAlignment="Left" VerticalAlignment="Top">
        <Grid.RenderTransform>
            <ScaleTransform ScaleX="{Binding Path=WindowSettings.ScaleX, Mode=TwoWay}" ScaleY="{Binding Path=WindowSettings.ScaleY, Mode=TwoWay}" CenterX="0" CenterY="0" />
        </Grid.RenderTransform>
        <!-- DropShadow -->
        <Border Background="#fafafa" CornerRadius="{Binding WindowSettings.Roundness}" Margin="{Binding WindowSettings.Margin}">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" Direction="-90"  RenderingBias="Performance" ShadowDepth="0" Opacity="0.3"/>
            </Border.Effect>
        </Border>
        <!-- Main Border -->
        <Border CornerRadius="{Binding WindowSettings.Roundness}" Margin="{Binding WindowSettings.Margin}">
            <Grid x:Name="GridRecord" Margin="22,20,22,22" ShowGridLines="False">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="0.69*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="0.69*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="10.5*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="10*"></RowDefinition>
                    <RowDefinition Height="50*"></RowDefinition>
                    <RowDefinition Height="16*"></RowDefinition>
                </Grid.RowDefinitions> 
                <!-- Title -->
                <StackPanel Orientation="Horizontal"  Grid.Column="0" Grid.ColumnSpan="8">
                    <TextBlock FontSize="16" FontFamily="{StaticResource Bold}" Text="{Binding RecordTitle}" VerticalAlignment="Top" Foreground="{StaticResource PrimaryThemeColor}"/>
                    <!-- Truck -->
                    <StackPanel Margin="5,-3,0,0" Orientation="Horizontal" UseLayoutRounding="False" SnapsToDevicePixels="False">

                        <Path Margin="0,-5.5,-16,0"  Height="20.5" Width="30"  Stretch="Uniform"
                              Data="M 127.00,108.00
           C 122.96,108.00 109.14,107.35 106.32,109.02
             103.31,110.82 98.09,121.03 87.00,120.74
             75.14,120.42 71.64,111.18 67.82,109.02
             65.65,107.79 62.45,108.00 60.00,108.00
             53.85,107.99 44.59,109.65 42.14,101.98
             41.92,100.18 42.00,96.94 42.14,95.00
             42.14,95.00 42.14,27.00 42.14,27.00
             42.00,21.15 40.21,9.22 46.06,6.02
             48.27,4.81 51.52,5.00 54.00,5.00
             54.00,5.00 127.00,5.00 127.00,5.00
             127.00,5.00 127.00,108.00 127.00,108.00 Z
           M 86.04,95.49
           C 77.36,99.07 81.96,108.34 87.99,107.44
             95.05,106.39 95.80,95.44 86.04,95.49 Z" Fill="{StaticResource PrimaryThemeColor}"></Path>
                        <Border Background="{StaticResource PrimaryThemeColor}" Height="18" Padding="5,0,5,0" Margin="0,-8,0,0" CornerRadius="10,0,0,10">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Margin="-4,0,0,0" FontSize="11" FontFamily="{StaticResource Bold}" Text="#"  Foreground="White"/>
                                <TextBlock Margin="0,0,0,0" FontSize="11" FontFamily="{StaticResource Bold}" Text="{Binding SelectedRecord.Id}"  Foreground="White"/>
                            </StackPanel>
                        </Border>

                        <Path Margin="-8,-5.5,0,0" Height="20.5" Width="30"  Stretch="Uniform"
                              Data="M 78.00,17.00
           C 84.76,17.00 97.78,15.08 101.99,21.19
             105.21,25.84 103.89,39.94 104.00,46.00
             104.05,48.52 103.95,51.40 106.31,52.98
             108.16,54.21 111.81,54.00 114.00,54.00
             114.00,54.00 155.00,54.00 155.00,54.00
             157.53,54.00 160.61,53.85 162.96,54.85
             168.34,57.14 174.96,70.60 178.20,76.00
             178.20,76.00 195.81,106.00 195.81,106.00
             196.03,107.96 195.99,109.99 195.81,112.00
             195.81,112.00 195.81,152.00 195.81,152.00
             195.81,152.00 195.81,157.99 195.81,157.99
             193.47,168.61 182.46,162.74 177.21,166.60
             174.50,168.59 173.03,172.71 168.83,176.53
             160.00,184.57 147.47,186.28 137.00,180.48
             127.75,175.36 125.96,168.11 122.62,166.02
             120.63,164.78 117.31,165.00 115.00,165.00
             115.00,165.00 78.00,165.00 78.00,165.00
             78.00,165.00 78.00,17.00 78.00,17.00 Z
           M 124.31,72.60
           C 121.32,75.12 122.01,77.28 122.00,81.00
             122.00,81.00 122.00,102.00 122.00,102.00
             122.02,104.13 121.74,107.51 123.60,108.98
             125.19,110.23 129.01,110.00 131.00,110.00
             131.00,110.00 166.00,110.00 166.00,110.00
             168.00,110.00 172.69,110.37 173.85,108.40
             175.21,106.09 171.47,101.06 170.28,99.00
             170.28,99.00 155.22,74.43 155.22,74.43
             152.35,71.55 148.75,72.01 145.00,72.00
             139.65,71.99 129.01,71.46 124.31,72.60 Z
           M 147.02,147.60
           C 134.51,154.52 144.26,168.37 153.91,164.15
             159.65,161.63 160.43,153.57 156.43,149.57
             153.64,146.78 150.56,146.88 147.02,147.60 Z" Fill="{StaticResource PrimaryThemeColor}"></Path>

                        <Border CornerRadius="4" Margin="10,1,0,6" Padding="7,0,7,0"  Background="#3cc25f" Cursor="Hand" Visibility="{Binding UpdateShippedSettingsVisibility}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="PreviewMouseDown">
                                    <i:InvokeCommandAction Command="{Binding UpdateShippedSettings}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <TextBlock Text="Update Shipped Data" FontSize="10"  FontFamily="{StaticResource Medium}"  HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White" ></TextBlock>
                        </Border>
                    </StackPanel>
                </StackPanel>

                <StackPanel Grid.Row="0" Grid.Column="8" Orientation="Horizontal" HorizontalAlignment="Right"  Margin="0,-5,-5,0" >

                    <!-- Minimize -->
                    <Border Height="11" Width="11"  VerticalAlignment="Top" Margin="0,0,7,0">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDown">
                                <i:InvokeCommandAction Command="{Binding MinimizeWindow}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Image Stretch="Uniform"  RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Minus.png" Cursor="Hand"/>
                    </Border>
                    
                    <!-- Close Window Button -->
                    <Border  Height="11" Width="11" HorizontalAlignment="Right" VerticalAlignment="Top" Cursor="Hand" CornerRadius="10">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDown">
                                <i:InvokeCommandAction Command="{Binding CloseWindow}" CommandParameter="{Binding ElementName=ThisRecordWindow}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Image Stretch="Uniform"  RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Cross_bs.png" />
                    </Border>
                </StackPanel>
                 
                

                <!-- First Record Data Set -->
                <!-- Type of Shipment -->
                <TextBlock Grid.Row="1" Grid.Column="0" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Shipment Type" VerticalAlignment="Center"/>
                <Border Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="1" BorderThickness="1" BorderBrush="LightGray" CornerRadius="2" Padding="0" Background="White" Margin="0,3,0,3" Cursor="Hand">
                    <ComboBox IsEnabled="{Binding IsShipmentTypeEnabled}" ItemsSource="{Binding SelectedRecord.ShipmentTypes}" SelectedItem="{Binding SelectedRecord.ShipmentType, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" FontSize="10" FontFamily="{StaticResource Medium}" ItemContainerStyle="{StaticResource ComboBoxItemContainerStyles}" Style="{StaticResource ComboBoxStyles}" Background="White" BorderThickness="0" VerticalContentAlignment="Center">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="SelectionChanged">
                                <i:InvokeCommandAction Command="{Binding ShipmentTypeChanged}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </ComboBox>
                </Border>

                <!-- Transport mode -->
                <TextBlock Grid.Row="2" Grid.Column="0" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Transport Mode" VerticalAlignment="Center"/>
                <Border Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="1" BorderThickness="1" BorderBrush="LightGray" CornerRadius="2" Padding="0" Background="White" Margin="0,3,0,3" Cursor="Hand">
                    <ComboBox IsEnabled="{Binding IsTransportModeEnabled}" ItemsSource="{Binding SelectedRecord.TransportModes}" SelectedItem="{Binding SelectedRecord.TransportMode, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" FontSize="10" FontFamily="{StaticResource Medium}" ItemContainerStyle="{StaticResource ComboBoxItemContainerStyles}" Style="{StaticResource ComboBoxStyles}" Background="White" BorderThickness="0" VerticalContentAlignment="Center">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="SelectionChanged">
                                <i:InvokeCommandAction Command="{Binding TransportModeChanged}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </ComboBox>
                </Border>


                


                <!-- Carrier -->
                <TextBlock Grid.Row="3" Grid.Column="0" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Carrier" VerticalAlignment="Center"/>
                <Border Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" IsEnabled="{Binding IsCarrierEnabled}" Text="{Binding SelectedRecord.Carrier, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10"/>
                </Border>

                <!-- Plate number -->
                <TextBlock Grid.Row="4" Grid.Column="0" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Plate Number" VerticalAlignment="Center"/>
                <Border Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Text="{Binding SelectedRecord.Plate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10"/>
                </Border>
                
                <!-- BID -->
                <TextBlock Grid.Row="5" Grid.Column="0" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="BID" VerticalAlignment="Center"/>
                <Border Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Text="{Binding SelectedRecord.BID, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10"/>
                </Border>

                <!-- PTA -->
                <TextBlock Grid.Row="6" Grid.Column="0" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="PTA" VerticalAlignment="Center"/>
                <Border Grid.Row="6" Grid.Column="1" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Text="{Binding SelectedRecord.PTA, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10"/>
                </Border>

                <Border Grid.Row="7" Background="Transparent" Grid.RowSpan="2" CornerRadius="0" Margin="0,0,0,0">
                    <Path Width="100" Height="100" Stroke="Purple" StrokeThickness="2">
                        <Path.Data>
                            <PathGeometry>
                                <PathFigure StartPoint="50,50">
                                    <ArcSegment Point="50,50" Size="50,50" SweepDirection="Counterclockwise" IsLargeArc="True" RotationAngle="0" 
                            x:Name="arcSegment"/>
                                </PathFigure>
                            </PathGeometry>
                        </Path.Data>
                    </Path>

                </Border>
                <!-- Second Record Data Set -->
                <!-- Entry time -->
                <TextBlock Grid.Row="1" Grid.Column="3" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Trans. Arrival Date" VerticalAlignment="Center"/>
                <Border Grid.Row="1" Grid.Column="4" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="0,0,0,0">
                    <TextBox CaretBrush="Lightgray" Focusable="False" Cursor="Arrow"  Text="{Binding SelectedRecord.TransportArrivalDate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, Converter={StaticResource DateTimeConverter}}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" HorizontalAlignment="Center" VerticalContentAlignment="Center" FontSize="10"/>
                </Border>

                <!-- Leaving time -->
                <TextBlock Grid.Row="2" Grid.Column="3" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Trans. Leaving Date" VerticalAlignment="Center"/>
                <Border Grid.Row="2" Grid.Column="4" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Focusable="False" Cursor="Arrow" Text="{Binding SelectedRecord.ShippedDate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, Converter={StaticResource DateTimeConverter}}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" HorizontalAlignment="Center" VerticalContentAlignment="Center" FontSize="10"/>
                </Border>

                <!-- Delivery date -->
                <TextBlock Grid.Row="3" Grid.Column="3" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Delivery Date" VerticalAlignment="Center"/>
                <Border Grid.Row="3" Grid.Column="4" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,24,3"  Padding="3,1,2,0">
                    <DatePicker Language="pt-PT" SelectedDate="{Binding SelectedRecord.DeliveryDate}" FontFamily="{StaticResource Medium}" CalendarStyle="{DynamicResource DatePickerCalendarStyles}" Style="{DynamicResource DatePickerStyles}"  Background="Transparent" BorderThickness="0"  FontSize="10" Focusable="False">
                    </DatePicker>
                </Border>

                <!-- Unloading ID -->
                <TextBlock Grid.Row="4" Grid.Column="3" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Unloading ID" VerticalAlignment="Center"/>
                <Border Grid.Row="4" Grid.Column="4" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Text="{Binding SelectedRecord.UnloadingId, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10"/>
                </Border>

                <!-- Palet number -->
                <TextBlock Grid.Row="5" Grid.Column="3" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Pallet Number" VerticalAlignment="Center"/>
                <Border Grid.Row="5" Grid.Column="4" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Text="{Binding SelectedRecord.PaleteNumber, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10" PreviewTextInput="NumberValidationTextBox"/>
                </Border>

                <!-- Comments -->
                <TextBlock Grid.Row="6" Grid.Column="3" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Aditional Comments" VerticalAlignment="Center"/>
                <Border Grid.Row="7" Grid.Column="3" Grid.ColumnSpan="2" Grid.RowSpan="2" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3">
                    <TextBox CaretBrush="Lightgray" Style="{StaticResource CustomTextBoxStyle}" AcceptsReturn="True" Text="{Binding SelectedRecord.Comment, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Top" FontSize="10" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"/>
                </Border>
                
                <!-- Third Record Data Set -->
                <!-- Creation Date -->
                <TextBlock Grid.Row="1" Grid.Column="6" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Creation Date" VerticalAlignment="Center"/>
                <Border Grid.Row="1" Grid.Column="7" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Focusable="False" Cursor="Arrow" Text="{Binding SelectedRecord.CreationDate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, Converter={StaticResource DateTimeConverter}}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" HorizontalAlignment="Center" FontSize="10"/>
                </Border>

                <!-- Update Date -->
                <TextBlock Grid.Row="2" Grid.Column="6" FontSize="10.5" FontFamily="{StaticResource Medium}" Text="Last Update Date" VerticalAlignment="Center"/>
                <Border Grid.Row="2" Grid.Column="7" Grid.ColumnSpan="1" BorderThickness="1" Background="White" BorderBrush="LightGray" CornerRadius="2" Margin="0,3,0,3"  Padding="3,0,3,0">
                    <TextBox CaretBrush="Lightgray" Focusable="False" Cursor="Arrow" Text="{Binding SelectedRecord.UpdatedDate, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, Converter={StaticResource DateTimeConverter}}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" HorizontalAlignment="Center"  FontSize="10"/>
                </Border>
                
                <!-- Client Notification Check -->
                <DockPanel  Grid.Row="4" Grid.Column="7" Grid.ColumnSpan="1" Visibility="{Binding WasNotifiedVisible}" IsEnabled="{Binding IsNotificationChangesEnabled}">
                    <TextBlock Text="Client was Notified?" Background="Transparent" FontFamily="{StaticResource Medium}" VerticalAlignment="Center" FontSize="10"/>
                    <Border Cursor="Hand" Width="11" Height="11" HorizontalAlignment="Right">
                        <CheckBox Style="{StaticResource CheckBoxStyle2}" IsChecked="{Binding SelectedRecord.WasNotified, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center" Cursor="Hand"></CheckBox>
                    </Border>
                </DockPanel>

                <!-- Transport Arrival Check -->
                <DockPanel  Grid.Row="3" Grid.Column="7" Grid.ColumnSpan="2" IsEnabled="{Binding IsTransportArrivedChangesEnabled}">
                    <TextBlock Text="Transport Arrived?" Background="Transparent" FontFamily="{StaticResource Medium}" VerticalAlignment="Center" FontSize="10"/>
                    <Border Cursor="Hand" Width="11" Height="11" HorizontalAlignment="Right">
                        <CheckBox Style="{StaticResource CheckBoxStyle2}" IsChecked="{Binding SelectedRecord.HasTransportArrived, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center" Cursor="Hand"></CheckBox>
                    </Border>
                </DockPanel>
                
                <!-- Preparation Percentage -->
                <TextBlock Grid.Row="5" Grid.Column="6" Grid.ColumnSpan="2" Text="Delivery Notes Preparation Percentage" FontFamily="{StaticResource Medium}" FontSize="10.5" VerticalAlignment="Center" ></TextBlock>
                
                <StackPanel Grid.Row="6" Grid.Column="6" Grid.RowSpan="1" Grid.ColumnSpan="2" VerticalAlignment="Center" Margin="0">
                    <Grid Height="8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="{Binding PreparedPercentage, FallbackValue=0*}"></ColumnDefinition>
                            <ColumnDefinition Width="{Binding NonPreparedPercentage, FallbackValue=100*}"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Border Background="White" Grid.ColumnSpan="2" CornerRadius="3" BorderThickness="1" BorderBrush="#bfbfbf">
                        </Border>
                        <Border  Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" Margin="2,2,2,2">
                        </Border>
                    </Grid>

                    <StackPanel Orientation="Horizontal"  HorizontalAlignment="Right">
                        <TextBlock Text="{Binding PreparedNumber}" HorizontalAlignment="Right" FontFamily="{StaticResource Medium}" Foreground="#808080" FontSize="8" Margin="0,2,0,0" ></TextBlock>
                        <TextBlock Text="%" FontFamily="{StaticResource Medium}" FontSize="8" Margin="0,2,0,0" Foreground="#808080"></TextBlock>
                    </StackPanel>
                     
                </StackPanel>
                
                <!-- Categories Selection -->
                <Grid Grid.Row="7" Grid.Column="6" Grid.ColumnSpan="2" Grid.RowSpan="2" Margin="-7,0,-2,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="100*"></RowDefinition>
                        <RowDefinition Height="25*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Created -->
                    <Border Tag="Created" Grid.Row="0" Grid.Column="1" CornerRadius="1" IsEnabled="{Binding IsCreatedEnabled}" BorderThickness="{Binding ThicknessBorderCreated}" BorderBrush="{Binding BorderCreated}" Background="White" Margin="7,11,7,3" IsEnabledChanged="Border_IsEnabledChanged">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDown">
                                <i:InvokeCommandAction Command="{Binding BorderCategoryClicked}"  CommandParameter="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Image Margin="6"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/created.png" />
                    </Border>
                    <TextBlock Grid.Row="1" Grid.Column="1" Text="Created" FontFamily="{StaticResource Medium}" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>
                    <Border CornerRadius="10" Background="White" Tag="Created" Grid.Column="1" Margin="0,8,2,0" Height="12" Width="12" HorizontalAlignment="Right" VerticalAlignment="Top"  Cursor="Hand" >
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseEnter">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryEnter}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                            <i:EventTrigger EventName="MouseLeave">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryLeave}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Path Tag="Created"  Fill="{StaticResource PrimaryThemeColor}" Height="12" Width="12" Stretch="Uniform"
                           Data="M 25.00,0.52 C 36.77,-1.35 47.49,0.99 55.82,10.04 72.38,28.03 63.15,58.33 39.00,63.48 7.23,70.27 -13.35,31.54 9.09,9.09 13.82,4.36 18.67,2.22 25.00,0.52 Z M 31.09,13.66 C 23.54,16.35 25.43,25.70 32.96,24.73 39.49,23.89 39.60,14.78 31.09,13.66 Z M 30.12,28.45 C 28.73,29.12 28.30,28.91 27.29,30.43 25.68,32.85 25.63,42.18 26.43,44.98 27.39,48.36 30.32,50.70 33.89,49.38 39.09,47.47 41.89,27.50 30.12,28.45 Z">
                        </Path>
                    </Border>
 
                    
                    <!-- Released 
                    <Border Tag="Released" Grid.Row="0" Grid.Column="1" CornerRadius="1" IsEnabled="{Binding IsReleasedEnabled}" BorderThickness="{Binding ThicknessBorderReleased}" BorderBrush="{Binding BorderReleased}" Background="White" Margin="7,11,7,3" IsEnabledChanged="Border_IsEnabledChanged">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDown">
                                <i:InvokeCommandAction Command="{Binding BorderCategoryClicked}"  CommandParameter="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Image Margin="6"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Released.png" />
                    </Border>
                    <TextBlock Grid.Row="1" Grid.Column="1" Text="Released" FontFamily="{StaticResource Medium}" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>

                    <Border CornerRadius="10" Background="White" Tag="Released" Grid.Column="1" Margin="0,8,2,0" Height="12" Width="12" HorizontalAlignment="Right" VerticalAlignment="Top"  Cursor="Hand" >
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseEnter">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryEnter}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                            <i:EventTrigger EventName="MouseLeave">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryLeave}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Path Tag="Created"  Fill="{StaticResource PrimaryThemeColor}" Height="12" Width="12" Stretch="Uniform"
       Data="M 25.00,0.52 C 36.77,-1.35 47.49,0.99 55.82,10.04 72.38,28.03 63.15,58.33 39.00,63.48 7.23,70.27 -13.35,31.54 9.09,9.09 13.82,4.36 18.67,2.22 25.00,0.52 Z M 31.09,13.66 C 23.54,16.35 25.43,25.70 32.96,24.73 39.49,23.89 39.60,14.78 31.09,13.66 Z M 30.12,28.45 C 28.73,29.12 28.30,28.91 27.29,30.43 25.68,32.85 25.63,42.18 26.43,44.98 27.39,48.36 30.32,50.70 33.89,49.38 39.09,47.47 41.89,27.50 30.12,28.45 Z">
                        </Path>
                    </Border> 
                    -->

                    <!-- Handled -->
                    <Grid Grid.Row="0" Grid.Column="2">
                        <Border Tag="Process"  CornerRadius="1" IsEnabled="{Binding IsHandledEnabled}" BorderThickness="{Binding ThicknessBorderHandled}" BorderBrush="{Binding BorderHandled}" Background="White" Margin="7,11,7,3" IsEnabledChanged="Border_IsEnabledChanged">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="PreviewMouseDown">
                                    <i:InvokeCommandAction Command="{Binding BorderCategoryClicked}"  CommandParameter="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Image Margin="6"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Process.png" />
                        </Border>

                        <Grid Visibility="{Binding ToBeHandledVisibility}">
                            <Border Margin="7,11,7,3" ClipToBounds="True" Background="Transparent" CornerRadius="10">
                                <Grid Margin="-20" Opacity="0.35" >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition></ColumnDefinition>
                                        <ColumnDefinition></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <Path Fill="Black" Grid.ColumnSpan="{Binding ToBeHandledPath.ColSpan}" Grid.RowSpan="{Binding ToBeHandledPath.RowSpan}"
                                          VerticalAlignment="{Binding ToBeHandledPath.VerticalAlignment}" 
                                          HorizontalAlignment="{Binding ToBeHandledPath.HorizontalAlignment}"  
                                          Data="{Binding ToBeHandledPath.Data}"
                                          Stretch="Uniform" />
                                </Grid>
                            </Border>
                            <Slider Value="{Binding SliderValue}" Minimum="0" Opacity="0" Maximum="360" TickPlacement="Both">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="ValueChanged">
                                        <i:InvokeCommandAction Command="{Binding ToBeHandledSliderChanged}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </Slider>
                        </Grid>

                    </Grid>


                    <TextBlock Grid.Row="1" Grid.Column="2" Text="Handled" FontFamily="{StaticResource Medium}" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>

                    <Border CornerRadius="10" Background="White" Tag="Process" Grid.Column="2" Margin="0,8,2,0" Height="12" Width="12" HorizontalAlignment="Right" VerticalAlignment="Top"  Cursor="Hand" >
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseEnter">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryEnter}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                            <i:EventTrigger EventName="MouseLeave">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryLeave}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Path Tag="Created"  Fill="{StaticResource PrimaryThemeColor}" Height="12" Width="12" Stretch="Uniform"
Data="M 25.00,0.52 C 36.77,-1.35 47.49,0.99 55.82,10.04 72.38,28.03 63.15,58.33 39.00,63.48 7.23,70.27 -13.35,31.54 9.09,9.09 13.82,4.36 18.67,2.22 25.00,0.52 Z M 31.09,13.66 C 23.54,16.35 25.43,25.70 32.96,24.73 39.49,23.89 39.60,14.78 31.09,13.66 Z M 30.12,28.45 C 28.73,29.12 28.30,28.91 27.29,30.43 25.68,32.85 25.63,42.18 26.43,44.98 27.39,48.36 30.32,50.70 33.89,49.38 39.09,47.47 41.89,27.50 30.12,28.45 Z">
                        </Path>
                    </Border>

                    <!-- Prepared -->
                    <Grid Grid.Row="0" Grid.Column="3" >
                        <Border Tag="Prepared" CornerRadius="1" IsEnabled="{Binding IsPreparedEnabled}" BorderThickness="{Binding ThicknessBorderPrepared}" BorderBrush="{Binding BorderPrepared}" Background="White" Margin="7,11,7,3" IsEnabledChanged="Border_IsEnabledChanged">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="PreviewMouseDown">
                                    <i:InvokeCommandAction Command="{Binding BorderCategoryClicked}"  CommandParameter="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Image Margin="6"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Prepared.png" />
                        </Border>

                        <Grid Visibility="{Binding ToBeHandledVisibility}">
                            <Border Margin="7,11,7,3" ClipToBounds="True" Background="Transparent" CornerRadius="10">
                                <Grid Margin="-20" Opacity="0.35" >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition></ColumnDefinition>
                                        <ColumnDefinition></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <Path Fill="Black" Grid.ColumnSpan="{Binding ToBeHandledPath.ColSpan}" Grid.RowSpan="{Binding ToBeHandledPath.RowSpan}"
                                                      VerticalAlignment="{Binding ToBeHandledPath.VerticalAlignment}" 
                                                      HorizontalAlignment="{Binding ToBeHandledPath.HorizontalAlignment}"  
                                          Data="{Binding ToBeHandledPath.Data}"
                  Stretch="Uniform" />
                                </Grid>
                            </Border>

                        </Grid>
                        
                    </Grid>
                    <TextBlock Grid.Row="1" Grid.Column="3" Text="Prepared" FontFamily="{StaticResource Medium}" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>
                   
                    <Border CornerRadius="10" Background="White" Tag="Prepared" Grid.Column="3" Margin="0,8,2,0" Height="12" Width="12" HorizontalAlignment="Right" VerticalAlignment="Top"  Cursor="Hand" >
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseEnter">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryEnter}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                            <i:EventTrigger EventName="MouseLeave">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryLeave}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Path Tag="Created"  Fill="{StaticResource PrimaryThemeColor}" Height="12" Width="12" Stretch="Uniform"
Data="M 25.00,0.52 C 36.77,-1.35 47.49,0.99 55.82,10.04 72.38,28.03 63.15,58.33 39.00,63.48 7.23,70.27 -13.35,31.54 9.09,9.09 13.82,4.36 18.67,2.22 25.00,0.52 Z M 31.09,13.66 C 23.54,16.35 25.43,25.70 32.96,24.73 39.49,23.89 39.60,14.78 31.09,13.66 Z M 30.12,28.45 C 28.73,29.12 28.30,28.91 27.29,30.43 25.68,32.85 25.63,42.18 26.43,44.98 27.39,48.36 30.32,50.70 33.89,49.38 39.09,47.47 41.89,27.50 30.12,28.45 Z">
                        </Path>
                    </Border>

                    <!-- Shipped -->
                    <Border Tag="Shipped" Grid.Row="0" Grid.Column="4" CornerRadius="1" IsEnabled="{Binding IsShippedEnabled}" BorderThickness="{Binding ThicknessBorderShipped}" BorderBrush="{Binding BorderShipped}" Background="White" Margin="7,11,7,3" IsEnabledChanged="Border_IsEnabledChanged">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDown">
                                <i:InvokeCommandAction Command="{Binding BorderCategoryClicked}"  CommandParameter="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Image Margin="6"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Shipped.png" />
                    </Border>
                    <TextBlock Grid.Row="1" Grid.Column="4" Text="Shipped" FontFamily="{StaticResource Medium}" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>

                    <Border CornerRadius="10" Background="White" Tag="Shipped" Grid.Column="4" Margin="0,8,2,0" Height="12" Width="12" HorizontalAlignment="Right" VerticalAlignment="Top"  Cursor="Hand" >
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseEnter">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryEnter}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                            </i:EventTrigger>
                            <i:EventTrigger EventName="MouseLeave">
                                <i:InvokeCommandAction Command="{Binding HoverCategoryLeave}"/>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Path Tag="Created"  Fill="{StaticResource PrimaryThemeColor}" Height="12" Width="12" Stretch="Uniform"
Data="M 25.00,0.52 C 36.77,-1.35 47.49,0.99 55.82,10.04 72.38,28.03 63.15,58.33 39.00,63.48 7.23,70.27 -13.35,31.54 9.09,9.09 13.82,4.36 18.67,2.22 25.00,0.52 Z M 31.09,13.66 C 23.54,16.35 25.43,25.70 32.96,24.73 39.49,23.89 39.60,14.78 31.09,13.66 Z M 30.12,28.45 C 28.73,29.12 28.30,28.91 27.29,30.43 25.68,32.85 25.63,42.18 26.43,44.98 27.39,48.36 30.32,50.70 33.89,49.38 39.09,47.47 41.89,27.50 30.12,28.45 Z">
                        </Path>
                    </Border>
                </Grid>
                
                
                <!-- Parts Table -->
                <Grid Grid.Row="9" Grid.Column="0" Grid.RowSpan="1" Grid.ColumnSpan="8">

                    <!-- Table -->
                    <Border Visibility="Visible"  Grid.RowSpan="1" CornerRadius="60,15,15,15"  Margin="0,10,0,5" BorderThickness="0" BorderBrush="Transparent">
                        <Grid  x:Name="GridParts">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="19*"></RowDefinition>
                                <RowDefinition Height="100*"></RowDefinition>
                            </Grid.RowDefinitions>
                            <!-- Parts Table titles -->
                            <Border CornerRadius="16,16,0,0" Margin="-15,0,-15,-2">
                                <ListView SelectionMode="Single" SelectionChanged="ListView_SelectionChanged" Background="Transparent" BorderThickness="0"  ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.IsDeferredScrollingEnabled="True" UseLayoutRounding="False" VirtualizingStackPanel.CacheLength="0">
                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListViewItem">
                                                        <Grid Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=ListView}}" Margin="-1,0,-1,0">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="20*"></ColumnDefinition>
                                                                <ColumnDefinition Width="76*"></ColumnDefinition>
                                                                <ColumnDefinition Width="200*"></ColumnDefinition>
                                                                <ColumnDefinition Width="85*"></ColumnDefinition>
                                                                <ColumnDefinition Width="85*"></ColumnDefinition>
                                                                <ColumnDefinition Width="200*"></ColumnDefinition>
                                                                <ColumnDefinition Width="80*"></ColumnDefinition>
                                                                <ColumnDefinition Width="59*"></ColumnDefinition>
                                                                <ColumnDefinition Width="59*"></ColumnDefinition>
                                                                <ColumnDefinition Width="59*"></ColumnDefinition>
                                                                <ColumnDefinition Width="90*"></ColumnDefinition>
                                                                <ColumnDefinition Width="90*"></ColumnDefinition>
                                                                <ColumnDefinition Width="20*"></ColumnDefinition>
                                                            </Grid.ColumnDefinitions>
                                                            <Border Grid.Row="0" Grid.Column="1" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Margin="0,0,0,0" Text="ShipTo" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="2" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="ShipTo Name" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="3" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="APN" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="4" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="CPN" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="5" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="Material Name" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="6" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="Unload. point" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="7" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="Stock" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="8" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="Planned" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="9" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="Shipped" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="10" Margin="0,0,0,0" BorderThickness="0,0,1,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="Delivery Note" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="11" Margin="0,0,0,0" BorderThickness="0,0,0,3" BorderBrush="LightGray" Background="#f5f5f5">
                                                                <TextBlock FontSize="9" FontFamily="{StaticResource Medium}" Text="Transport Num." VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                            </Border>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                    <ListViewItem>Item 1</ListViewItem>
                                </ListView>
                            </Border>
                            <!-- Parts Table listview -->
                            <Border Grid.Row="2" Margin="-15,0,-15,0" >
                                <ListView x:Name="PartsListview" Margin="0,0,0,0" VerticalAlignment="Top" SelectionMode="Multiple" Background="Transparent" SelectionChanged="ListView_SelectionChanged" ItemsSource="{Binding Parts, Mode=OneWay}" BorderThickness="0" Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Border}}" ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.IsDeferredScrollingEnabled="True" UseLayoutRounding="False" VirtualizingStackPanel.CacheLength="0">
                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ListViewItem">
                                                        <Grid Height="25" Margin="-1,0,-1,0">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="20*"></ColumnDefinition>
                                                                <ColumnDefinition Width="76*"></ColumnDefinition>
                                                                <ColumnDefinition Width="200*"></ColumnDefinition>
                                                                <ColumnDefinition Width="85*"></ColumnDefinition>
                                                                <ColumnDefinition Width="85*"></ColumnDefinition>
                                                                <ColumnDefinition Width="200*"></ColumnDefinition>
                                                                <ColumnDefinition Width="80*"></ColumnDefinition>
                                                                <ColumnDefinition Width="59*"></ColumnDefinition>
                                                                <ColumnDefinition Width="59*"></ColumnDefinition>
                                                                <ColumnDefinition Width="59*"></ColumnDefinition>
                                                                <ColumnDefinition Width="90*"></ColumnDefinition>
                                                                <ColumnDefinition Width="90*"></ColumnDefinition>
                                                                <ColumnDefinition Width="20*"></ColumnDefinition>
                                                            </Grid.ColumnDefinitions>
                                                            <!-- Selected -->
                                                            <Border Grid.Row="0" Grid.Column="0" Margin="0,0,0,0">
                                                                <CheckBox Style="{StaticResource CheckBoxStyle1}" IsChecked="{Binding Selected, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" VerticalAlignment="Center" Cursor="Hand">
                                                                    <i:Interaction.Triggers>
                                                                        <i:EventTrigger EventName="Checked">
                                                                            <i:InvokeCommandAction Command="{Binding DataContext.SelectPart, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding}"  />
                                                                        </i:EventTrigger>
                                                                        <i:EventTrigger EventName="Unchecked">
                                                                            <i:InvokeCommandAction Command="{Binding DataContext.DeselectPart, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding}"  />
                                                                        </i:EventTrigger>
                                                                    </i:Interaction.Triggers>
                                                                </CheckBox>
                                                            </Border>

                                                            <!-- ShipTo -->
                                                            <Border Grid.Row="0" Grid.Column="1" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <Grid>
                                                                    <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray" Text="{Binding ShipTo, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9" PreviewTextInput="NumberValidationTextBox"/>
                                                                    <Border Tag="ShipTo" IsEnabled="{Binding ShipToEnabled}" Cursor="Hand" Background="Transparent" HorizontalAlignment="Right" Height="11" Width="11" Padding="1" Margin="0,0,5,0">
                                       
                                                                        <Path Fill="#b8b8b8"   Stretch="Uniform" Data="M4 10.4V4a1 1 0 0 1 1-1h5V1h4v2h5a1 1 0 0 1 1 1v6.4l1.086.326a1 1 0 0 1 .682 1.2l-1.516 6.068A4.992 4.992 0 0 1 16 16 4.992 4.992 0 0 1 12 18a4.992 4.992 0 0 1-4-2 4.992 4.992 0 0 1-4.252 1.994l-1.516-6.068a1 1 0 0 1 .682-1.2L4 10.4zm2-.6L12 8l2.754.826 1.809.543L18 9.8V5H6v4.8zM4 20a5.978 5.978 0 0 0 4-1.528A5.978 5.978 0 0 0 12 20a5.978 5.978 0 0 0 4-1.528A5.978 5.978 0 0 0 20 20h2v2h-2a7.963 7.963 0 0 1-4-1.07A7.963 7.963 0 0 1 12 22a7.963 7.963 0 0 1-4-1.07A7.963 7.963 0 0 1 4 22H2v-2h2z"></Path>
                                                                    </Border>
                                                                </Grid>
                                                            </Border>
                                                            
                                                            <!-- ShipTo Name -->
                                                            <Border Grid.Row="0" Grid.Column="2" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray"    Text="{Binding ShipToName, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9" />
                                                            </Border>
                                                            <!-- APN -->
                                                            <Border Grid.Row="0" Grid.Column="3" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray" Tag="APN" Text="{Binding APN, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9">
                                                                    
                                                                </TextBox>
                                                            </Border>
                                                            <!-- CPN -->
                                                            <Border Grid.Row="0" Grid.Column="4" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray" Tag="CPN"  Text="{Binding CPN, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9">
                                                                  
                                                                </TextBox>
                                                            </Border>
                                                            <!-- Designation -->
                                                            <Border Grid.Row="0" Grid.Column="5" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray" Tag="Designation"  Text="{Binding Designation, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9">
                                                                
                                                                </TextBox>
                                                            </Border>
                                                            <!-- Unloading Point -->
                                                            <Border Grid.Row="0" Grid.Column="6" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <Grid>
                                                                    <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray"   Text="{Binding UnloadingPoint, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9" PreviewTextInput="NumberValidationTextBox"/>
                                                                    <Border Tag="UnloadingPoint" IsEnabled="{Binding UnloadingPointEnabled}" Cursor="Hand" Background="Transparent" HorizontalAlignment="Right" Height="12" Width="12" Padding="1" Margin="0,0,5,0">
 
                                                                        <Path  Fill="#b8b8b8" HorizontalAlignment="Right" Stretch="Uniform" Data="M12,24C5.383,24,0,18.617,0,12c.603-15.898,23.399-15.893,24,0,0,6.617-5.383,12-12,12Zm0-21C7.038,3,3,7.038,3,12c.453,11.923,17.549,11.92,18,0,0-4.962-4.038-9-9-9Zm0,16c-9.251-.294-9.249-13.707,0-14,9.251,.294,9.249,13.707,0,14Zm0-11c-5.274,.139-5.273,7.862,0,8,5.274-.139,5.273-7.862,0-8Zm0,6c-2.628-.047-2.628-3.954,0-4,2.628,.047,2.628,3.954,0,4Z" ></Path>
                                                                    </Border>
                                                                </Grid>
                                                            </Border>
                                                            <!-- SAP Quantity -->
                                                            <Border Grid.Row="0" Grid.Column="7" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray" Tag="SapQuantity" Text="{Binding SapQuantity, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9"  PreviewTextInput="NumberValidationTextBox">
                                                                </TextBox>
                                                            </Border>
                                                            
                                                            <!-- Expected Quantity -->
                                                            <Border Grid.Row="0" Grid.Column="8" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray" Tag="ExpectedQuantity" Text="{Binding ExpectedQuantity, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9"  PreviewTextInput="NumberValidationTextBox">
                                                                    
                                                                </TextBox>
                                                            </Border>
                                                            <!-- Final Quantity -->
                                                            <Border Grid.Row="0" Grid.Column="9" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox CaretBrush="Lightgray" Tag="FinalQuantity" IsEnabled="True" IsReadOnly="True" Text="{Binding FinalQuantity, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9"  PreviewTextInput="NumberValidationTextBox" >
                                                                  
                                                                </TextBox>
                                                            </Border>
                                                            <!-- DeliveryNote -->
                                                            <Border Grid.Row="0" Grid.Column="10" Margin="0,0,0,0" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True"  CaretBrush="Lightgray" Tag="DeliveryNote" Text="{Binding DeliveryNote, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9">
                                                                    
                                                                </TextBox>
                                                            </Border>
                                                            <!-- Transport Number -->
                                                            <Border Grid.Row="0" Grid.Column="11" Margin="0,0,0,0" BorderThickness="0,0,0,1" BorderBrush="LightGray" Background="{Binding Color}">
                                                                <TextBox IsEnabled="True" IsReadOnly="True" CaretBrush="Lightgray" Tag="TransportNumber" Text="{Binding TransportNumber, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" UndoLimit="3" Background="Transparent" Padding="2,0,2,0" FontFamily="{StaticResource Medium}" BorderThickness="0"  VerticalContentAlignment="Center"   FontSize="9">
                                                                   
                                                                </TextBox>
                                                            </Border>
                                                            <Border Grid.Row="0" Grid.Column="12" Margin="0,0,0,0" HorizontalAlignment="Right">
                                                                <Grid>
                                                                    <Border  Background="Transparent" Cursor="Hand" HorizontalAlignment="Right" Padding="1" Height="12">
                                                                        <i:Interaction.Triggers>
                                                                            <i:EventTrigger EventName="PreviewMouseDown">
                                                                                <i:InvokeCommandAction Command="{Binding DataContext.OpenCommentPart, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding}"/>
                                                                            </i:EventTrigger>
                                                                        </i:Interaction.Triggers>
                                                                        <Path Fill="#b8b8b8" Visibility="Visible" Height="9" Width="9"  Stretch="Uniform" Data="M20,0H4A4,4,0,0,0,0,4V16a4,4,0,0,0,4,4H6.9l4.451,3.763a1,1,0,0,0,1.292,0L17.1,20H20a4,4,0,0,0,4-4V4A4,4,0,0,0,20,0ZM7,5h5a1,1,0,0,1,0,2H7A1,1,0,0,1,7,5ZM17,15H7a1,1,0,0,1,0-2H17a1,1,0,0,1,0,2Zm0-4H7A1,1,0,0,1,7,9H17a1,1,0,0,1,0,2Z" ></Path>
                                                                    </Border>
                                                                    <Border Visibility="{Binding CommentFlagVisibility}" IsHitTestVisible="False">
                                                                        <Path Margin="-1,7,0,0" Fill="Red" Height="4.5" Width="4.5" HorizontalAlignment="Left" VerticalAlignment="Top" Stretch="Uniform" Data="M12,19a7,7,0,1,1,7-7A7.008,7.008,0,0,1,12,19Z" ></Path>
                                                                    </Border>
                                                                </Grid>
                                                            </Border>
                                                            
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                </ListView>
                            </Border>
                        </Grid>
                    </Border>

                    <Border Visibility="Visible"  Grid.RowSpan="1" CornerRadius="15"  Margin="0,10,0,5" BorderThickness="1" BorderBrush="LightGray" IsHitTestVisible="False">
                    </Border>

                    <Border Grid.RowSpan="1" CornerRadius="3"  Margin="-5,5,0,5"  Background="{StaticResource PrimaryThemeColor}" HorizontalAlignment="Left" VerticalAlignment="Top" Width="17" Height="16" IsHitTestVisible="False">
                        <!--
                        <Border.OpacityMask>
                            <VisualBrush>
                                <VisualBrush.Visual>
                                    <Path Data="M0,50 A50,50 0 0 1 50,0 L0,0 Z" VerticalAlignment="Top" HorizontalAlignment="Left" Fill="Blue"/>
                                </VisualBrush.Visual>
                            </VisualBrush>
                        </Border.OpacityMask>
                         -->
                    </Border>
                    <Border Grid.RowSpan="1" HorizontalAlignment="Left" VerticalAlignment="Top" Width="18" Height="18" Margin="-5,5,0,5">
                        <Image x:Name="ExtRetImg" Margin="0,0,1,3" Height="13" Width="13"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/double_up_thk.png" HorizontalAlignment="Center" VerticalAlignment="Center"  Cursor="Hand" MouseDown="ExtendRetractTable"/>
                    </Border>

                    <Grid Margin="0,10,0,5">
                        <Path Data="M37,22 A15,15 0 0 1 22,37 L37,37 Z" VerticalAlignment="Bottom"  HorizontalAlignment="Right" Fill="#fafafa"/>
                        <Path Data="M15,37 A15,15 0 0 1 0,22 L0,37 Z" VerticalAlignment="Bottom" HorizontalAlignment="Left" Fill="#fafafa"/>
                    </Grid>
                </Grid>

                <!-- Buttons row -->
                <Border Grid.Row="10" Grid.Column="0" Grid.ColumnSpan="8" Grid.RowSpan="1" CornerRadius="0"  Padding="0" BorderThickness="0,0,0,0" BorderBrush="LightGray" >
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="70*"></RowDefinition>
                            <RowDefinition Height="100*"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions> 
                       
                        <!-- Delivery Notes-->
                        <StackPanel VerticalAlignment="Stretch" Grid.Column="0"  Grid.RowSpan="2"  HorizontalAlignment="Left"  >


                            <Border BorderThickness="1" VerticalAlignment="Top" Background="White" BorderBrush="LightGray"  HorizontalAlignment="Left"  CornerRadius="2" Margin="0,0,0,0"   >
                                <StackPanel > 
                                    <!-- Add DeliveryNote --> 
                                    <ListView Margin="0" ItemsSource="{Binding DeliveryNotes}"  Background="Transparent" BorderBrush="Transparent" Padding="0" VerticalAlignment="Bottom" ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Hidden">
                                        <ListView.Resources>
                                            <Style TargetType="ScrollViewer" BasedOn="{StaticResource CustomScrollViewerStyle}"></Style>
                                        </ListView.Resources> 
                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <WrapPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>
                                        <ListView.ItemContainerStyle>
                                            <Style TargetType="ListViewItem">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                            <Border Padding="5,2,5,2" Background="{StaticResource PrimaryThemeColor}"  Margin="1.5" CornerRadius="2">
                                                                <DockPanel HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                                                    <TextBlock Text="{Binding Number}" Margin="0,0,0,0" Background="Transparent" Padding="2" FontFamily="{StaticResource Bold}" FontSize="9" Foreground="White"/>

                                                                    <Border Cursor="Hand">
                                                                        <i:Interaction.Triggers>
                                                                            <i:EventTrigger EventName="PreviewMouseDown"> 
                                                                                <i:InvokeCommandAction Command="{Binding DataContext.DeleteDeliveryNote, RelativeSource={RelativeSource AncestorType=ListView}}"  CommandParameter="{Binding .}" />
                                                                            </i:EventTrigger>
                                                                        </i:Interaction.Triggers>
                                                                        <Path  Width="9" Height="9" Fill="White" Stretch="Uniform" Margin="3,0,2,0" HorizontalAlignment="Right"
Data="M8 1.5V2.5H3C2.44772 2.5 2 2.94772 2 3.5V4.5C2 5.05228 2.44772 5.5 3 5.5H21C21.5523 5.5 22 5.05228 22 4.5V3.5C22 2.94772 21.5523 2.5 21 2.5H16V1.5C16 0.947715 15.5523 0.5 15 0.5H9C8.44772 0.5 8 0.947715 8 1.5Z M3.9231 7.5H20.0767L19.1344 20.2216C19.0183 21.7882 17.7135 23 16.1426 23H7.85724C6.28636 23 4.98148 21.7882 4.86544 20.2216L3.9231 7.5Z"></Path>
                                                                    </Border>
                                                                </DockPanel>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </ListView.ItemContainerStyle>
                                    </ListView>


                                </StackPanel>
                            </Border>

                            <!-- Add Delivery Notes -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">

                                <Border CornerRadius="4" Margin="0,3,0,3" Padding="0,0,0,0" Height="10" HorizontalAlignment="Right" VerticalAlignment="Center" Background="Transparent" Cursor="Hand">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="PreviewMouseDown">
                                            <i:InvokeCommandAction Command="{Binding OpenInsertDeliveryNotesMenu}"/>
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <TextBlock Text="+ Add Delivery Note(s)" FontSize="9.5"  FontFamily="{StaticResource Bold}" Margin="0,0,0,0" VerticalAlignment="Center" Foreground="{StaticResource PrimaryThemeColor}" ></TextBlock>
                                </Border>
                            </StackPanel>
                        </StackPanel>




                        <StackPanel Grid.Row="1" Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                            
                            <!-- Special Record Actions Buttons -->
                            <Border CornerRadius="4" Margin="10,2,0,0" Padding="7,0,7,0"  Background="White" BorderThickness="1" BorderBrush="LightGray">
                                <StackPanel Orientation="Horizontal">
                                    <!-- Print Record -->
                                    <TextBlock Margin="0,0,5,0" Cursor="Hand" Text="Print Record" FontSize="10"  FontFamily="{StaticResource Medium}"  HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="CornflowerBlue" >
                                       <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="PreviewMouseDown">
                                                <i:InvokeCommandAction Command="{Binding PrintRecord}"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers> 
                                    </TextBlock>
                                    <Border Margin="0,0,9,0" Background="Transparent" Cursor="Hand">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="PreviewMouseDown">
                                                <i:InvokeCommandAction Command="{Binding PrintRecord}"/>
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                        <Path Height="14" Width="14" Fill="CornflowerBlue" Stretch="Uniform" Data="M 10.9492 8.2539 L 45.0508 8.2539 L 45.0508 7.8555 C 45.0508 4.3867 42.3789 2.8398 38.5586 2.8398 L 17.4414 2.8398 C 13.8320 2.8398 10.9492 4.3867 10.9492 7.8555 Z M 8.6524 44.2071 L 10.2695 44.2071 L 10.2695 48.7071 C 10.2695 51.8242 11.7929 53.1602 14.7461 53.1602 L 41.2539 53.1602 C 44.2304 53.1602 45.7304 51.8242 45.7304 48.7071 L 45.7304 44.2071 L 47.3711 44.2071 C 51.9181 44.2071 54.3320 41.9102 54.3320 37.3398 L 54.3320 18.2618 C 54.3320 13.6914 51.9181 11.3711 47.3711 11.3711 L 8.6524 11.3711 C 4.3164 11.3711 1.6680 13.6914 1.6680 18.2618 L 1.6680 37.3398 C 1.6680 41.9102 4.0820 44.2071 8.6524 44.2071 Z M 15.9180 49.6445 C 14.6758 49.6445 14.0429 49.0352 14.0429 47.7696 L 14.0429 29.4180 C 14.0429 28.1758 14.6758 27.5664 15.9180 27.5664 L 40.1055 27.5664 C 41.3711 27.5664 41.9570 28.1758 41.9570 29.4180 L 41.9570 47.7696 C 41.9570 49.0352 41.3711 49.6445 40.1055 49.6445 Z M 19.9961 36.0039 L 36.0508 36.0039 C 36.8711 36.0039 37.5039 35.3711 37.5039 34.5508 C 37.5039 33.7539 36.8711 33.1211 36.0508 33.1211 L 19.9961 33.1211 C 19.1524 33.1211 18.5429 33.7539 18.5429 34.5508 C 18.5429 35.3711 19.1524 36.0039 19.9961 36.0039 Z M 19.9961 44.1836 L 36.0508 44.1836 C 36.8711 44.1836 37.5039 43.5742 37.5039 42.7774 C 37.5039 41.9571 36.8711 41.3008 36.0508 41.3008 L 19.9961 41.3008 C 19.1524 41.3008 18.5429 41.9571 18.5429 42.7774 C 18.5429 43.5742 19.1524 44.1836 19.9961 44.1836 Z"></Path>
                                    </Border>
                                    <!-- Cancel Record -->
                                    <TextBlock Cursor="Hand" Margin="0,0,5,0" Text="Cancel Record" FontSize="10"  FontFamily="{StaticResource Medium}"  HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource PrimaryThemeColor}" >
                                        <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="PreviewMouseDown">
                                                    <i:InvokeCommandAction Command="{Binding CancelRecord}"  />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                    </TextBlock>
                                    <Grid>
                                        <Border Margin="0,0,0,0" Background="Transparent" Cursor="Hand">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="PreviewMouseDown">
                                                    <i:InvokeCommandAction Command="{Binding CancelRecord}"  />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                            <Path Height="16" Width="16"  Fill="{StaticResource PrimaryThemeColor}" Stretch="Uniform" Data="M247.395,34.938H129.095c-6.659,0-12.077,5.418-12.077,12.077v25.103H81.654c-6.002,0-13.614,3.693-17.329,8.409  l-23.693,30.074c-3.087,3.918-9.517,8.997-14.041,11.093l-16.588,7.684C4.393,131.975,0,138.852,0,145.034v43.994  c0,6.492,5.281,11.773,11.773,11.773h5.243c3.989,13.694,16.644,23.733,31.609,23.733c14.965,0,27.62-10.039,31.609-23.733h80.422  c3.989,13.694,16.645,23.733,31.609,23.733c14.965,0,27.62-10.039,31.609-23.733h23.823c6.492,0,11.773-5.281,11.773-11.773v-62.859  V83.891V47.015C259.473,40.356,254.055,34.938,247.395,34.938z M48.626,207.963c-9.031,0-16.355-7.323-16.355-16.355  c0-9.032,7.324-16.355,16.355-16.355c9.033,0,16.355,7.322,16.355,16.355C64.981,200.64,57.659,207.963,48.626,207.963z   M116.614,118.34c0,4.303-3.519,7.775-7.821,7.717l-49.354-0.662c-4.302-0.058-5.668-2.889-3.036-6.292l19.445-25.146  c2.632-3.403,8.305-6.188,12.607-6.188h20.336c4.303,0,7.822,3.52,7.822,7.822V118.34z M192.267,207.963  c-9.031,0-16.354-7.323-16.354-16.355c0-9.032,7.322-16.355,16.354-16.355c9.033,0,16.355,7.322,16.355,16.355  C208.622,200.64,201.3,207.963,192.267,207.963z"></Path>
                                        </Border>
                                        <Border Visibility="{Binding VisualCancelVisibility}" IsHitTestVisible="False">
                                            <Path Margin="0,0,-2,0" Fill="#e3364a" Stretch="Uniform" Height="16" Width="16" Data="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,2a9.949,9.949,0,0,1,6.324,2.262L4.262,18.324A9.992,9.992,0,0,1,12,2Zm0,20a9.949,9.949,0,0,1-6.324-2.262L19.738,5.676A9.992,9.992,0,0,1,12,22Z"></Path>
                                        </Border>
                                    </Grid>
                                    
                                </StackPanel>
                            </Border>
                            
                            <!-- Delete -->
                            <Border CornerRadius="4" Margin="10,2,0,0" Padding="7,0,7,0"  Background="#e32f22" Cursor="Hand">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown">
                                        <i:InvokeCommandAction Command="{Binding DeleteRecord}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <TextBlock Text="Delete Record" FontSize="10"  FontFamily="{StaticResource Medium}"  HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White" ></TextBlock>
                            </Border>
                            <!-- Save -->
                            <Border CornerRadius="4" Margin="10,2,0,0" Padding="7,0,7,0"  Background="{StaticResource PrimaryThemeColor}" Cursor="Hand">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="PreviewMouseDown">
                                        <i:InvokeCommandAction Command="{Binding ConfirmChanges}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <TextBlock Text="Save Record" FontSize="10"  FontFamily="{StaticResource Medium}"  HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White" ></TextBlock>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
                
            </Grid>
        </Border>
        <!-- End of Main Border -->
    </Grid>
</Window>
