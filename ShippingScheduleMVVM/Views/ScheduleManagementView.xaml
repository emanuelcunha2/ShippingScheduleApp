<UserControl x:Class="ShippingScheduleMVVM.Views.ScheduleManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:views="clr-namespace:ShippingScheduleMVVM.Views"
             xmlns:viewmodels="clr-namespace:ShippingScheduleMVVM.ViewModels" 
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:converters="clr-namespace:ShippingScheduleMVVM.Converters"
             xmlns:Behaviors="clr-namespace:ShippingScheduleMVVM.Behaviours" 
             xmlns:models="clr-namespace:ShippingScheduleMVVM.Models"
             d:DataContext="{d:DesignInstance Type=viewmodels:ScheduleManagementViewModel}" 
             mc:Ignorable="d" 
             UseLayoutRounding="False" RenderOptions.BitmapScalingMode ="LowQuality"  
             d:DesignHeight="510" d:DesignWidth="945">
    <Grid Background="Transparent">

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20*"></ColumnDefinition>
            <ColumnDefinition Width="140*"></ColumnDefinition>
            <ColumnDefinition Width="508*"></ColumnDefinition>
            <ColumnDefinition Width="20*"></ColumnDefinition>
            <ColumnDefinition Width="169*"></ColumnDefinition>
            <ColumnDefinition Width="20*"></ColumnDefinition>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="19*"></RowDefinition>
            <RowDefinition Height="19*"></RowDefinition>
            <RowDefinition Height="15*"></RowDefinition>
            <RowDefinition Height="62*"></RowDefinition>
            <RowDefinition Height="109*"></RowDefinition>
            <RowDefinition Height="15*"></RowDefinition>
            <RowDefinition Height="98*"></RowDefinition>
            <RowDefinition Height="15*"></RowDefinition>
            <RowDefinition Height="81*"></RowDefinition>
            <RowDefinition Height="15*"></RowDefinition>
            <RowDefinition Height="63*"></RowDefinition>
        </Grid.RowDefinitions>

        <!-- Top Section: Page Title -->
        <StackPanel Grid.Column="1" Grid.RowSpan="2" VerticalAlignment="Center">
            <!-- Title -->
            <TextBlock Text="Weekly Calendar" FontSize="18" FontFamily="{StaticResource Bold}" VerticalAlignment="Bottom" Height="26" Margin="0,0,0,-1" Foreground="{StaticResource PrimaryThemeColor}"/>
            <!-- Current day -->
            <TextBlock Text="{Binding TodayString}" FontSize="10" FontFamily="{StaticResource Medium}" VerticalAlignment="Top" Foreground="Gray" Height="14" Margin="0,-4,0,0"></TextBlock>
        </StackPanel>
        <!-- Top Section: Schedule Options and refresh-->
        <StackPanel Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" Orientation="Horizontal" HorizontalAlignment="Right">

            <!-- Search for x record -->
            <Border Padding="0" Margin="0,7,14,7" Height="22" Background="{StaticResource PrimaryThemeColor}" CornerRadius="11" BorderThickness="0" HorizontalAlignment="Right" VerticalAlignment="Center" BorderBrush="{StaticResource PrimaryThemeColor}">
                <StackPanel Orientation="Horizontal">
                     
                    <Grid Width="215" Margin="5,1,0,1">
                        <TextBlock x:Name="SearchIdPlaceholder"  Margin="4,0,20,0" Text="Search for an Id / Delivery Note" Foreground="#c7daed" FontSize="10" VerticalAlignment="Center" FontFamily="{StaticResource Medium}"></TextBlock>

                        <Border Margin="3,0,8,-2" Padding="1">
                            <ComboBox ItemsSource="{Binding SearchingRecordsList}" Foreground="{StaticResource PrimaryThemeColor}" ScrollViewer.HorizontalScrollBarVisibility="Hidden" IsDropDownOpen="{Binding IsRecordsDropDownOpen}" SelectedItem="{Binding SearchingRecord, Mode=TwoWay}" FontSize="9" FontFamily="{StaticResource Medium}" ItemContainerStyle="{StaticResource ComboBoxItemContainerStyles}" Style="{StaticResource ComboBoxStyles}" Background="White" BorderThickness="0" VerticalContentAlignment="Center">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" >
                                            <TextBlock Text="{Binding Id}" TextTrimming="CharacterEllipsis" Margin="0,0,10,0"/>
                                            <TextBlock Text="{Binding ShipTos}" TextTrimming="CharacterEllipsis"  Width="177"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </Border>
                        
                        <Border Margin="3,0,26,0" BorderThickness="0" Background="Transparent" BorderBrush="#ebebeb" CornerRadius="0">
                            <TextBox CaretBrush="White" TextChanged="TextBox_TextChanged" GotFocus="TextBox_GotFocus" Foreground="White" Text="{Binding SearchRecordIdText, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Padding="0,0,0,0" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="TextChanged">
                                        <i:InvokeCommandAction Command="{Binding SearchIdTextChanged}"/>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </TextBox>
                        </Border>

                        <StackPanel Orientation="Horizontal"  HorizontalAlignment="Right" VerticalAlignment="Center">
                            <Rectangle Width="1" Margin="0,2,1,2" Fill="#c7daed"></Rectangle>
                            <Border Background="{StaticResource PrimaryThemeColor}" Width="18" Height="18" Margin="0,0,4,0" CornerRadius="15" Cursor="Hand">
                                <Path Width="10" Height="10" Margin="0,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Center" Stretch="Uniform" Fill="#ebebeb" Data="M504.352,459.061l-99.435-99.477c74.402-99.427,54.115-240.344-45.312-314.746S119.261-9.277,44.859,90.15   S-9.256,330.494,90.171,404.896c79.868,59.766,189.565,59.766,269.434,0l99.477,99.477c12.501,12.501,32.769,12.501,45.269,0   c12.501-12.501,12.501-32.769,0-45.269L504.352,459.061z M225.717,385.696c-88.366,0-160-71.634-160-160s71.634-160,160-160   s160,71.634,160,160C385.623,314.022,314.044,385.602,225.717,385.696z"></Path>
                            </Border>
                        </StackPanel>
                         
                    </Grid>

                </StackPanel>
            </Border>

            
            <!--  Blanks Option / Daily Calendar Option -->
            <Border Padding="5" Margin="0,0,14,0" CornerRadius="3" BorderThickness="1" HorizontalAlignment="Right" VerticalAlignment="Center" BorderBrush="LightGray" Background="White">
                <StackPanel Orientation="Horizontal">
                    <!-- Text -->
                    <TextBlock Text="Daily Calendar"  FontSize="11" VerticalAlignment="Top" FontFamily="{StaticResource Medium}" Margin="0,0,4,0"></TextBlock>
                    <!-- Checkbox -->
                    <Grid  Grid.Row="11" Grid.Column="0" Cursor="Hand" Width="11" Height="11" Margin="0,0,4,0">
                        <CheckBox Style="{StaticResource CheckBoxStyle2}" IsChecked="{Binding ShowDailyChecked, Mode=TwoWay}" VerticalAlignment="Center" Cursor="Hand"></CheckBox>
                    </Grid>

                    <Rectangle Width="1" Fill="#ebebeb"></Rectangle>  

                    <!-- Text -->
                    <TextBlock x:Name="tete" Text="Show Blanks"  FontSize="11" VerticalAlignment="Top" FontFamily="{StaticResource Medium}" Margin="5,0,4,0"></TextBlock>
                    <!-- Checkbox -->
                    <Grid Grid.Row="11" Grid.Column="0" Cursor="Hand" Width="11" Height="11">
                        <CheckBox Style="{StaticResource CheckBoxStyle2}" IsChecked="{Binding ShowWhitesChecked, Mode=TwoWay}" VerticalAlignment="Center" Cursor="Hand"></CheckBox>
                    </Grid>
                </StackPanel>
            </Border>
 

            <!-- Update Database Option -->
            <Border Padding="5" Margin="0,0,0,0" CornerRadius="3" BorderThickness="1" HorizontalAlignment="Right" VerticalAlignment="Center" BorderBrush="LightGray" Background="White">
                <StackPanel Orientation="Horizontal">
                    <!-- Text -->
                    <TextBlock FontSize="11" VerticalAlignment="Top" FontFamily="{StaticResource Medium}" Margin="0,0,4,0">
                        <Run Text="Update DB" /> 
                    </TextBlock>
                    <!-- Update Button -->
                    <Border Grid.Row="11" Grid.Column="0" Cursor="Hand"  Focusable="True" Width="15" Height="15" VerticalAlignment="Center" HorizontalAlignment="Left" Background="Transparent" BorderThickness="1" CornerRadius="0.5">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="PreviewMouseDown">
                                <i:InvokeCommandAction Command="{Binding RefreshRecords}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <Border>
                            <Path Stretch="Uniform" Fill="{StaticResource PrimaryThemeColor}"
                                  Data="M66.074,228.731C81.577,123.379,179.549,50.542,284.901,66.045c35.944,5.289,69.662,20.626,97.27,44.244l-24.853,24.853   c-8.33,8.332-8.328,21.84,0.005,30.17c3.999,3.998,9.423,6.245,15.078,6.246h97.835c11.782,0,21.333-9.551,21.333-21.333V52.39   c-0.003-11.782-9.556-21.331-21.338-21.329c-5.655,0.001-11.079,2.248-15.078,6.246L427.418,65.04   C321.658-29.235,159.497-19.925,65.222,85.835c-33.399,37.467-55.073,83.909-62.337,133.573   c-2.864,17.607,9.087,34.202,26.693,37.066c1.586,0.258,3.188,0.397,4.795,0.417C50.481,256.717,64.002,244.706,66.074,228.731z M479.429,256.891c-16.108,0.174-29.629,12.185-31.701,28.16C432.225,390.403,334.253,463.24,228.901,447.738   c-35.944-5.289-69.662-20.626-97.27-44.244l24.853-24.853c8.33-8.332,8.328-21.84-0.005-30.17   c-3.999-3.998-9.423-6.245-15.078-6.246H43.568c-11.782,0-21.333,9.551-21.333,21.333v97.835   c0.003,11.782,9.556,21.331,21.338,21.329c5.655-0.001,11.079-2.248,15.078-6.246l27.733-27.733   c105.735,94.285,267.884,85.004,362.17-20.732c33.417-37.475,55.101-83.933,62.363-133.615   c2.876-17.605-9.064-34.208-26.668-37.084C482.655,257.051,481.044,256.91,479.429,256.891z">
                            </Path>
                        </Border>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Top Section: User profile -->
        <!-- User picture -->
        <Border Grid.Row="0" Grid.RowSpan="2" Grid.Column="4" BorderThickness="1" CornerRadius="25" Width="35" Height="35" Padding="0" HorizontalAlignment="Left" Background="LightGray">
            <Image Grid.Row="0"  Grid.Column="1" Margin="1"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Profile_user.png" />
        </Border>
        <!-- Username -->
        <TextBlock Grid.Column="4" FontSize="10" Margin="45,0,0,-1" Text="{Binding Username}" FontFamily="{StaticResource Bold}" VerticalAlignment="Bottom" />
        <!-- User role -->
        <TextBlock Grid.Column="4" Grid.Row="1" Text="{Binding Role}" FontSize="9" Margin="45,-1,0,0"  FontFamily="{StaticResource Medium}" VerticalAlignment="Top" Foreground="Gray"></TextBlock>
        <!-- User Notifications -->
        <Border Grid.Row="0" Grid.RowSpan="2" Grid.Column="4" BorderThickness="1" CornerRadius="25" Width="18" Height="18" Padding="0" HorizontalAlignment="Right" Cursor="Hand" >
            <Image Grid.Row="0"  Grid.Column="1" Margin="0"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/Notification_on.png" />
        </Border>

        <!-- Small Section Between Top and Middle Section : Schedule Week Manager -->
        <!-- Right Middle Section: Calendar and Schedule Statistics -->
        <!-- Calendar -->
        <Border Grid.Row="3" Grid.RowSpan="2" Grid.Column="4" Background="White" BorderBrush="LightGray" BorderThickness="1" CornerRadius="15">
            <Grid  Margin="14,11,14,14">
                <Grid.Resources>
                    <DataTemplate DataType="{x:Type viewmodels:CalendarViewModel}">
                        <views:CalendarView/>
                    </DataTemplate>
                </Grid.Resources>
                <ContentControl Content="{Binding ScheduleCalendarViewModel}"></ContentControl>
            </Grid>
        </Border>

        <!-- Schedule Statistics Status -->
        <Border Padding="14,11,14,11" Grid.Row="6" Grid.RowSpan="1" Grid.Column="4" Background="White" BorderBrush="LightGray" BorderThickness="1" CornerRadius="14">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="10*"></ColumnDefinition>
                    <ColumnDefinition Width="40*"></ColumnDefinition>
                    <ColumnDefinition Width="15*"></ColumnDefinition>
                    <ColumnDefinition Width="15*"></ColumnDefinition>
                    <ColumnDefinition Width="10*"></ColumnDefinition>
                    <ColumnDefinition Width="40*"></ColumnDefinition>
                    <ColumnDefinition Width="15*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="115*"></RowDefinition>
                    <RowDefinition Height="100*"></RowDefinition>
                    <RowDefinition Height="100*"></RowDefinition>
                    <RowDefinition Height="100*"></RowDefinition>
                </Grid.RowDefinitions>
                
                <!-- Status Type: Daily/Total-->
                <Grid Grid.Row="0" Grid.Column="5" Grid.ColumnSpan="3" Margin="1.5,2,0,3" Cursor="Hand" Background="Transparent">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="PreviewMouseDown">
                            <i:InvokeCommandAction Command="{Binding ChangeIsDailyStatus}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <!-- Daily -->
                    <Border Grid.Column="0" BorderBrush="{Binding DailyStatusBorderBrush}" BorderThickness="{Binding DailyStatusBorderThickness}" Background="{Binding DailyStatusBackground}" CornerRadius="2,0,0,2">
                        <TextBlock Text="Day" FontFamily="{StaticResource Medium}" FontSize="8" Padding="0" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{Binding DailyStatusForeground}"/>
                    </Border>

                    <!-- Total -->
                    <Border Grid.Column="1" BorderBrush="{Binding TotalStatusBorderBrush}" BorderThickness="{Binding TotalStatusBorderThickness}" Background="{Binding TotalStatusBackground}" CornerRadius="0,2,2,0">
                        <TextBlock Text="Week" FontFamily="{StaticResource Medium}" FontSize="8" Padding="0" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{Binding TotalStatusForeground }"/>
                    </Border>
                </Grid>
                <!-- Title -->
                <TextBlock  Grid.Row="0" Grid.ColumnSpan="3" Grid.Column="0" Text="Status"  FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Left" FontFamily="{StaticResource Bold}" Margin="0,0,0,0" Foreground="{StaticResource PrimaryThemeColor}"></TextBlock>
                
                <!-- Created -->
                <Border  Grid.Row="1" Grid.Column="0" Height="5" Width="5" Background="#bdbdbd" CornerRadius="5"></Border>
                <TextBlock Grid.Row="1" Grid.Column="1" Text="Created" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="9" Margin="2,0,0,0" />
                <TextBlock Grid.Row="1" Grid.Column="2" Text="{Binding ScheduleRecordsStatus.Created}" HorizontalAlignment="Right" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="8" Margin="1,0,0,0" Foreground="#c2c2c2"/>

                <!-- Released -->
                <Border  Grid.Row="2" Grid.Column="0" Height="5" Width="5" Background="#ffcb21" CornerRadius="5"></Border>
                <TextBlock Grid.Row="2" Grid.Column="1" Text="Released" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="9" Margin="2,0,0,0" />
                <TextBlock Grid.Row="2" Grid.Column="2" Text="{Binding ScheduleRecordsStatus.Released}" HorizontalAlignment="Right" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="8" Margin="1,0,0,0" Foreground="#c2c2c2"/>

                <!-- Handled -->
                <Border  Grid.Row="3" Grid.Column="0" Height="5" Width="5" Background="#f59300" CornerRadius="5"></Border>
                <TextBlock Grid.Row="3" Grid.Column="1" Text="Handled" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="9" Margin="2,0,0,0" />
                <TextBlock Grid.Row="3" Grid.Column="2" Text="{Binding ScheduleRecordsStatus.Handled}" HorizontalAlignment="Right" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="8" Margin="1,0,0,0" Foreground="#c2c2c2"/>

                <!-- Prepared -->
                <Border  Grid.Row="1" Grid.Column="4" Height="5" Width="5" Background="#80b0ff" CornerRadius="5"></Border>
                <TextBlock Grid.Row="1" Grid.Column="5" Text="Prepared" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="9" Margin="2,0,0,0" />
                <TextBlock Grid.Row="1" Grid.Column="6" Text="{Binding ScheduleRecordsStatus.Prepared}" HorizontalAlignment="Right" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="8" Margin="1,0,0,0" Foreground="#c2c2c2"/>

                <!-- Shipped -->
                <Border  Grid.Row="2" Grid.Column="4" Height="5" Width="5" Background="#18db83" CornerRadius="5"></Border>
                <TextBlock Grid.Row="2" Grid.Column="5" Text="Shipped" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="9" Margin="2,0,0,0" />
                <TextBlock Grid.Row="2" Grid.Column="6" Text="{Binding ScheduleRecordsStatus.Shipped}" HorizontalAlignment="Right" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="8" Margin="1,0,0,0" Foreground="#c2c2c2"/>


                <!-- Notifications Status -->
                <Border  Grid.Row="3" Grid.Column="4" Height="5" Width="5" Background="Red" CornerRadius="5"></Border>
                <TextBlock Grid.Row="3" Grid.Column="5" Text="To Notify" HorizontalAlignment="Left" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="9" Margin="2,0,0,0" />
                <TextBlock Grid.Row="3" Grid.Column="6" Text="{Binding ScheduleRecordsStatus.Notified}" HorizontalAlignment="Right" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="8" Margin="1,0,0,0" Foreground="#c2c2c2"/>

            </Grid>
        </Border>

        <!-- Schedule Forum Chat -->
        <Border x:Name="ForumChatBorder" Padding="14,11,14,11" Panel.ZIndex="2"  Margin="0" Grid.Row="8" Grid.RowSpan="3" Grid.Column="4" Background="White" BorderBrush="LightGray" BorderThickness="1" CornerRadius="13">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="5*"></ColumnDefinition>
                    <ColumnDefinition Width="25*"></ColumnDefinition>
                    <ColumnDefinition Width="22"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="21.5"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="21.5"></RowDefinition>
                </Grid.RowDefinitions>
                 
                <!-- Expand Button-->
                <Border Grid.Row="0" Grid.Column="2" Padding="9,0,0,6" Cursor="Hand" MouseDown="ChatBorder_MouseDown" Background="Transparent">
                    <Path x:Name="ChangeChatSizePath" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center" Fill="{StaticResource PrimaryThemeColor}"
                        Data="M21,21H16v3h5.546A2.457,2.457,0,0,0,24,21.545V16H21Z M0,2.455V8H3V3H8V0H2.454A2.457,2.457,0,0,0,0,2.455Z M3,16H0v5.545A2.457,2.457,0,0,0,2.454,24H8V21H3Z M21.546,0H16V3h5V8h3V2.455A2.457,2.457,0,0,0,21.546,0Z"/>
                </Border>
                
                <!-- Title -->
                <TextBlock  Grid.Row="0" Grid.ColumnSpan="7" Grid.Column="0" Text="Latest Changes"  FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Left" FontFamily="{StaticResource Bold}" Margin="0,0,0,0" Foreground="{StaticResource PrimaryThemeColor}"></TextBlock>

                <!-- Chat -->
                <Border Grid.Row="1" Grid.RowSpan="5" Grid.ColumnSpan="3" Margin="5,10,-8,10" >
                    <Grid>
                        <Border x:Name="ChatListview"  Background="Transparent" Margin="0,0,15,0"></Border>
                        <ListView x:Name="ChatListViewItems" PreviewMouseWheel="ListView_PreviewMouseWheel" ItemsSource="{Binding ChatMessages, Mode=OneWay}" ScrollViewer.CanContentScroll="False" ScrollViewer.VerticalScrollBarVisibility="Visible"   ScrollViewer.HorizontalScrollBarVisibility="Hidden" BorderBrush="Transparent" Background="Transparent" Margin="-1" VirtualizingStackPanel.CacheLength="0">
                            <ListView.Resources>
                                <Style TargetType="ScrollViewer" BasedOn="{StaticResource CustomScrollViewerStyle}"></Style>
                            </ListView.Resources>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="Loaded">
                                    <i:InvokeCommandAction Command="{Binding SetChatList}" CommandParameter="{Binding ElementName=ChatListViewItems}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>

                            <ListView.ItemContainerStyle>
                                <Style TargetType="ListViewItem">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="ListViewItem">
                                                <StackPanel HorizontalAlignment="Left"  Width="{Binding ElementName=ChatListview, Path=ActualWidth}" Margin="0,0,0,0">
                                                    <DockPanel HorizontalAlignment="{Binding HorizontalAlign}" Margin="0,0,0,0" >
                                                        <Label Cursor="Hand" DockPanel.Dock="Left" HorizontalAlignment="Left" Visibility="{Binding UserVisibility}" Margin="0,8,0,0" Padding="0" Content="{Binding User}" FontSize="8.2" VerticalAlignment="Center" FontFamily="{StaticResource Bold}" Foreground="#002747"></Label>
                                                        <Label DockPanel.Dock="Right"  HorizontalAlignment="Left"  Visibility="{Binding UserVisibility}" Margin="4,8,0,0" Padding="0" Content="{Binding Date}" FontSize="8" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" Foreground="#446885"></Label>
                                                    </DockPanel>
                                                    <Border CornerRadius="2" Background="{Binding ColorBrush}" Margin="0,1.5,0,1.5" Padding="2,0,2,0" HorizontalAlignment="{Binding HorizontalAlign}">
                                                        <TextBlock TextWrapping="Wrap" Padding="5" Text="{Binding MessageContent}" FontSize="9" VerticalAlignment="Center" HorizontalAlignment="Left" FontFamily="{StaticResource Medium}" Margin="0,0,0,0" Foreground="#00111f"></TextBlock>
                                                    </Border>
                                                </StackPanel>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </ListView.ItemContainerStyle>
                        </ListView>
                    </Grid>
                </Border>
                
                <Rectangle Height="1" Margin="0,5,0,0" Fill="#ebebeb" Grid.Row="1" Grid.ColumnSpan="3" VerticalAlignment="Top" ></Rectangle>

                <Border Grid.Row="6" Grid.Column="2" Margin="-3" Cursor="Hand" Grid.ColumnSpan="1" BorderThickness="0" Background="{StaticResource PrimaryThemeColor}" BorderBrush="{StaticResource PrimaryThemeColor}" CornerRadius="15"  Padding="7,7,8,7">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="PreviewMouseDown">
                            <i:InvokeCommandAction Command="{Binding SendMessageForum}" CommandParameter="{Binding ElementName=ChatListViewItems}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <Path Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center" Fill="White"
                          Data="M5.521,19.9h5.322l3.519,3.515a2.035,2.035,0,0,0,1.443.6,2.1,2.1,0,0,0,.523-.067,2.026,2.026,0,0,0,1.454-1.414L23.989,1.425Z M4.087,18.5,22.572.012,1.478,6.233a2.048,2.048,0,0,0-.886,3.42l3.495,3.492Z"></Path>
                </Border>

                <Border Grid.Row="6" Grid.Column="0" Margin="0,0,10,0" Grid.ColumnSpan="2" BorderThickness="1" Background="#f1f1f1" BorderBrush="LightGray" CornerRadius="10"  Padding="6,0,6,0">
                    <TextBox CaretBrush="Lightgray" Text="{Binding ForumMessage, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Background="Transparent" FontFamily="{StaticResource Medium}" BorderThickness="0" VerticalContentAlignment="Center" FontSize="10">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Enter" Command="{Binding SendMessageForum}" CommandParameter="{Binding ElementName=ChatListViewItems}"/> 
                        </TextBox.InputBindings>
                    </TextBox>
                </Border>
            </Grid>
        </Border>

        <!-- Left Middle Section: Schedule Section -->
        <!-- UI Visual Drag locations -->
        <Border Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4" Grid.RowSpan="8" CornerRadius="10" Background="#336495ED" Visibility="{Binding VisualDragVisibility}">
            <DockPanel>
                <Border Tag="DragLeft" DockPanel.Dock="Left" Width="20" Background="Transparent" Padding="5"> <!-- Left -->
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="DragOver">
                            <i:InvokeCommandAction Command="{Binding DragRecordWeek}"  CommandParameter="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="DragLeave">
                            <i:InvokeCommandAction Command="{Binding DragLeaveWeek}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <Image Margin="0" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/double_l.png"/>
                </Border>
                <Border Tag="DragRight"  DockPanel.Dock="Right" Width="20" Background="Transparent" Padding="5"> <!-- Right -->
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="DragOver">
                            <i:InvokeCommandAction Command="{Binding DragRecordWeek}"  CommandParameter="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type Border}}}"/>
                        </i:EventTrigger>
                        <i:EventTrigger EventName="DragLeave">
                            <i:InvokeCommandAction Command="{Binding DragLeaveWeek}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <Image Margin="0" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/double_r.png" />
                </Border> 
                <StackPanel DockPanel.Dock="Right" Background="Transparent"></StackPanel> <!-- Center -->
            </DockPanel>
        </Border>

        <!-- Left Middle Section: Schedule Section -->
        <!-- Schedule Records Title Grid -->
        <Grid  Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2"  AllowDrop="True" Background="Transparent" UseLayoutRounding="false">
            <Grid.OpacityMask>
                <VisualBrush Visual="{Binding ElementName=clipMask}" Stretch="None" />
            </Grid.OpacityMask>
            <Border x:Name="clipMask" Background="#fafafa" CornerRadius="26,26,0,0"/>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="{Binding ColumnDefinitionWidthDaysTitle}" />
                    <ColumnDefinition Width="7*" />
                </Grid.ColumnDefinitions>
                <Border BorderThickness="0,0,0,1" Background="#f7f7f7" BorderBrush="LightGray" CornerRadius="0" Margin="0">
                    <Label Content="{Binding CurrentlySelectedWeek}" Foreground="LightGray" HorizontalAlignment="Center" VerticalAlignment="Bottom" FontFamily="{StaticResource Medium}" FontSize="8" ></Label>
                </Border>
                <ItemsControl Grid.Column="1" ItemsSource="{Binding WeekDays}" Margin="0">
                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="ContentPresenter">
                            <Setter Property="Visibility" Value="{Binding Visibility}" />
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="0" Margin="0">
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock Text="{Binding WeekDay, Mode=OneTime}" TextAlignment="Center" VerticalAlignment="Center" FontFamily="{StaticResource Medium}" FontSize="10"  Foreground="{Binding ForegroundColor, Mode=OneTime}"/>
                                    <TextBlock Text="{Binding Day, Mode=OneTime}" TextAlignment="Center" VerticalAlignment="Center" FontFamily="{StaticResource Bold}" FontSize="18" Foreground="{Binding ForegroundColor, Mode=OneTime}"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <UniformGrid Rows="1"></UniformGrid>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </Grid>
            <Border BorderThickness="1,1,1,0" BorderBrush="Lightgray" CornerRadius="25,25,0,0"></Border>
        </Grid>
        
        <!-- Export Records to Excel -->
        <Border Grid.Row="3" Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Top" Height="17" Width="17" Background="White" BorderThickness="1" BorderBrush="LightGray" CornerRadius="3" Cursor="Hand">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="PreviewMouseDown">
                    <i:InvokeCommandAction Command="{Binding ExportRecordsToExcel}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <Path Height="11" Width="11" Fill="#0b9c58" VerticalAlignment="Center" HorizontalAlignment="Center" Stretch="Uniform" Data="M25.162,3H16v2.984h3.031v2.031H16V10h3v2h-3v2h3v2h-3v2h3v2h-3v3h9.162   C25.623,23,26,22.609,26,22.13V3.87C26,3.391,25.623,3,25.162,3z M24,20h-4v-2h4V20z M24,16h-4v-2h4V16z M24,12h-4v-2h4V12z M24,8   h-4V6h4V8z M0,2.889v20.223L15,26V0L0,2.889z M9.488,18.08l-1.745-3.299c-0.066-0.123-0.134-0.349-0.205-0.678   H7.511C7.478,14.258,7.4,14.494,7.277,14.81l-1.751,3.27H2.807l3.228-5.064L3.082,7.951h2.776l1.448,3.037   c0.113,0.24,0.214,0.525,0.304,0.854h0.028c0.057-0.198,0.163-0.492,0.318-0.883l1.61-3.009h2.542l-3.037,5.022l3.122,5.107   L9.488,18.08L9.488,18.08z"></Path>
        </Border>
        <!-- Schedule Records Grid -->
        <Border x:Name="ScheduleBackLayer" Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2" Grid.RowSpan="7" CornerRadius="25" ClipToBounds="True">
            <ListView x:Name="ScheduleListview" ItemsSource="{Binding ScheduleRows, Mode=OneWay}" Height="400"  Margin="-2.1,-2.2,-2,-1.7" ScrollViewer.VerticalScrollBarVisibility="Hidden" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.IsDeferredScrollingEnabled="True" UseLayoutRounding="false" VirtualizingStackPanel.CacheLength="0" >
                <i:Interaction.Behaviors>
                    <Behaviors:ScrollViewerBehavior VerticalOffset="{Binding ScrollPosition, Mode=TwoWay}" />
                </i:Interaction.Behaviors>
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListViewItem">

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="0.55*"/>
                                            <ColumnDefinition Width="7*"/>
                                        </Grid.ColumnDefinitions>
                                        <Border BorderThickness="0,0,1,1" BorderBrush="LightGray">
                                            <TextBlock Text="{Binding Time, Mode=OneTime}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9" ></TextBlock>
                                        </Border>
                                        <UniformGrid Grid.Column="2" Rows="1" Height="58">
                                            <!-- Sunday -->
                                            <Border Visibility="{Binding SundayVisibility, Mode=OneTime}" Padding="1,4,4,4" BorderThickness="0,0,1,1" BorderBrush="LightGray" AllowDrop="True" Tag="{Binding TagSU, Mode=OneTime}">
                                                <i:Interaction.Behaviors>
                                                    <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding DateSU, Mode=OneTime}" />
                                                    <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                </i:Interaction.Behaviors>
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="PreviewDrop">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DropRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True"  />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragEnter">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragOverRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragLeave">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragLeaveRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <Border.Background>
                                                    <ImageBrush ImageSource="/ShippingScheduleMVVM;component/Resources/Images/lines.png" />
                                                </Border.Background>
                                                <ItemsControl ItemsSource="{Binding SundayRecords,Mode=OneTime}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <UniformGrid Rows="1"></UniformGrid>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border OpacityMask="{Binding OpacityMask, Mode=OneTime}" Background="{StaticResource PrimaryThemeColor}" Margin="2.5,0,0,0" CornerRadius="3" IsHitTestVisible="{Binding HitTestVisibility, Mode=OneWay}">
                                                                <!-- Drag -->
                                                                <i:Interaction.Behaviors>
                                                                    <Behaviors:PreviewMouseDownBorderBehavior Command="{Binding DataContext.DragRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"></Behaviors:PreviewMouseDownBorderBehavior>
                                                                </i:Interaction.Behaviors>
                                                                <Border BorderThickness="1" BorderBrush="{StaticResource PrimaryThemeColor}" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="{Binding Corner, Mode=OneTime}">
                                                                    <i:Interaction.Behaviors>
                                                                        <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"  CommandParameter="{Binding Mode=OneTime}" />
                                                                        <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                                    </i:Interaction.Behaviors>
                                                                    <Grid>
                                                                        <Grid.Resources>
                                                                            <Style TargetType="TextBlock">
                                                                                <Setter Property="FontFamily" Value="{StaticResource Bold}" />
                                                                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                                            </Style>
                                                                        </Grid.Resources>
                                                                        <StackPanel Margin="5,5,5,5" IsHitTestVisible="False">
                                                                            <TextBlock Text="{Binding IdDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding Plate,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding ShipTos,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding PaleteNumberDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                        </StackPanel>
                                                                        <!-- C-->
                                                                        <DockPanel LastChildFill="False">
                                                                            <DockPanel  Height="13" DockPanel.Dock="Top">
                                                                                <Image Visibility="{Binding NotificationAlertVisibility, Mode=OneTime}" Source="{Binding NotificationImageSource, Mode=OneTime}" Margin="-4,-8,0,0"  Height="10.5" Width="10.5" HorizontalAlignment="Center"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
   
                                                                                </Image>
                                                                                 <Image Visibility="{Binding AddRecordVisibility, Mode=OneTime}" Margin="0,-3,-2,0" Height="13" Width="13" HorizontalAlignment="Right"  Stretch="Uniform" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="LowQuality">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/Plus.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                            <StackPanel Visibility="{Binding RecordBottomInfoVisibility, Mode=OneTime}" Orientation="Horizontal" HorizontalAlignment="Right" Height="14" DockPanel.Dock="Bottom" >
                                                                                <Image Visibility="{Binding CanceledVisibility, Mode=OneTime}" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/truck.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                                <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False">
                                                                                    <TextBlock Text="{Binding ShippedDateDescription, Mode=OneTime}" FontSize="7" Foreground="White" VerticalAlignment="Center"></TextBlock>
                                                                                </Border>
                                                                            </StackPanel>
                                                                            <DockPanel  Visibility="{Binding RescheduledVisibility, Mode = OneTime}" Width="14" DockPanel.Dock="Right" >
                                                                                <Image HorizontalAlignment="Right" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="MouseEnter">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleEnter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Image}}}" />
                                                                                        </i:EventTrigger>
                                                                                        <i:EventTrigger EventName="MouseLeave">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleLeave, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"/>
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/clock.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                        </DockPanel>
                                                                    </Grid>
                                                                </Border>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </Border>
                                            <!-- Monday -->
                                            <Border Visibility="{Binding MondayVisibility, Mode=OneTime}" Padding="1,4,4,4" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="Transparent" AllowDrop="True" Tag="{Binding TagMO, Mode=OneTime}">
                                                <i:Interaction.Behaviors>
                                                    <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding DateMO, Mode=OneTime}" />
                                                    <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                </i:Interaction.Behaviors>
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="PreviewDrop">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DropRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True"  />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragEnter">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragOverRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragLeave">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragLeaveRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <ItemsControl ItemsSource="{Binding MondayRecords,Mode=OneTime}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <UniformGrid Rows="1"></UniformGrid>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border OpacityMask="{Binding OpacityMask, Mode=OneTime}" Background="{StaticResource PrimaryThemeColor}" Margin="2.5,0,0,0" CornerRadius="3" IsHitTestVisible="{Binding HitTestVisibility, Mode=OneWay}">
                                                                <!-- Drag -->
                                                                <i:Interaction.Behaviors>
                                                                    <Behaviors:PreviewMouseDownBorderBehavior Command="{Binding DataContext.DragRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"></Behaviors:PreviewMouseDownBorderBehavior>
                                                                </i:Interaction.Behaviors> 
                                                                <Border BorderThickness="1" BorderBrush="{StaticResource PrimaryThemeColor}" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="{Binding Corner, Mode=OneTime}">
                                                                    <i:Interaction.Behaviors>
                                                                        <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"  CommandParameter="{Binding Mode=OneTime}" />
                                                                        <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                                    </i:Interaction.Behaviors>
                                                                    <Grid>
                                                                        <Grid.Resources>
                                                                            <Style TargetType="TextBlock">
                                                                                <Setter Property="FontFamily" Value="{StaticResource Bold}" />
                                                                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                                            </Style>
                                                                        </Grid.Resources>
                                                                        <StackPanel Margin="5,5,5,5" IsHitTestVisible="False">
                                                                            <TextBlock Text="{Binding IdDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding Plate,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding ShipTos,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding PaleteNumberDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                        </StackPanel>
                                                                        <!-- C-->
                                                                        <DockPanel LastChildFill="False">
                                                                            <DockPanel  Height="13" DockPanel.Dock="Top">
                                                                                <Image Visibility="{Binding NotificationAlertVisibility, Mode=OneTime}" Source="{Binding NotificationImageSource, Mode=OneTime}" Margin="-4,-8,0,0"  Height="10.5" Width="10.5" HorizontalAlignment="Center"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
   
                                                                                </Image>
                                                                                 <Image Visibility="{Binding AddRecordVisibility, Mode=OneTime}" Margin="0,-3,-2,0" Height="13" Width="13" HorizontalAlignment="Right"  Stretch="Uniform" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="LowQuality">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/Plus.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                            <StackPanel Visibility="{Binding RecordBottomInfoVisibility, Mode=OneTime}" Orientation="Horizontal" HorizontalAlignment="Right" Height="14" DockPanel.Dock="Bottom" >
                                                                                <Image Visibility="{Binding CanceledVisibility, Mode=OneTime}" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/truck.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                                <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False">
                                                                                    <TextBlock Text="{Binding ShippedDateDescription, Mode=OneTime}" FontSize="7" Foreground="White" VerticalAlignment="Center"></TextBlock>
                                                                                </Border>
                                                                            </StackPanel>
                                                                            <DockPanel  Visibility="{Binding RescheduledVisibility, Mode = OneTime}" Width="14" DockPanel.Dock="Right" >
                                                                                <Image Cursor="Hand" HorizontalAlignment="Right" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="MouseEnter">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleEnter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Image}}}" />
                                                                                        </i:EventTrigger>
                                                                                        <i:EventTrigger EventName="MouseLeave">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleLeave, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"/>
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/clock.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                        </DockPanel>
                                                                    </Grid>
                                                                </Border>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </Border>
                                            <!-- Tuesday -->
                                            <Border Visibility="{Binding TuesdayVisibility, Mode=OneTime}" Padding="1,4,4,4" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="Transparent" AllowDrop="True" Tag="{Binding TagTU, Mode=OneTime}">
                                                <i:Interaction.Behaviors>
                                                    <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding DateTU, Mode=OneTime}" />
                                                    <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                </i:Interaction.Behaviors>
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="PreviewDrop">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DropRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True"  />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragEnter">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragOverRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragLeave">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragLeaveRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <ItemsControl ItemsSource="{Binding TuesdayRecords,Mode=OneTime}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <UniformGrid Rows="1"></UniformGrid>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border OpacityMask="{Binding OpacityMask, Mode=OneTime}" Background="{StaticResource PrimaryThemeColor}" Margin="2.5,0,0,0" CornerRadius="3" IsHitTestVisible="{Binding HitTestVisibility, Mode=OneWay}">
                                                                <!-- Drag -->
                                                                <i:Interaction.Behaviors>
                                                                    <Behaviors:PreviewMouseDownBorderBehavior Command="{Binding DataContext.DragRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"></Behaviors:PreviewMouseDownBorderBehavior>
                                                                </i:Interaction.Behaviors>
                                                                <Border BorderThickness="1" BorderBrush="{StaticResource PrimaryThemeColor}" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="{Binding Corner, Mode=OneTime}">
                                                                    <i:Interaction.Behaviors>
                                                                        <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"  CommandParameter="{Binding Mode=OneTime}" />
                                                                        <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                                    </i:Interaction.Behaviors>
                                                                    <Grid>
                                                                        <Grid.Resources>
                                                                            <Style TargetType="TextBlock">
                                                                                <Setter Property="FontFamily" Value="{StaticResource Bold}" />
                                                                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                                            </Style>
                                                                        </Grid.Resources>
                                                                        <StackPanel Margin="5,5,5,5" IsHitTestVisible="False">
                                                                            <TextBlock Text="{Binding IdDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding Plate,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding ShipTos,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding PaleteNumberDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                        </StackPanel>
                                                                        <!-- C-->
                                                                        <DockPanel LastChildFill="False">
                                                                            <DockPanel  Height="13" DockPanel.Dock="Top">
                                                                                <Image Visibility="{Binding NotificationAlertVisibility, Mode=OneTime}" Source="{Binding NotificationImageSource, Mode=OneTime}" Margin="-4,-8,0,0"  Height="10.5" Width="10.5" HorizontalAlignment="Center"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
            
                                                                                </Image>
                                                                                 <Image Visibility="{Binding AddRecordVisibility, Mode=OneTime}" Margin="0,-3,-2,0" Height="13" Width="13" HorizontalAlignment="Right"  Stretch="Uniform" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="LowQuality">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/Plus.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                            <StackPanel Visibility="{Binding RecordBottomInfoVisibility, Mode=OneTime}" Orientation="Horizontal" HorizontalAlignment="Right" Height="14" DockPanel.Dock="Bottom" >
                                                                                <Image Visibility="{Binding CanceledVisibility, Mode=OneTime}" Source="/ShippingScheduleMVVM;component/Resources/Images/Truck.png" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">

                                                                                </Image>
                                                                                <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False">
                                                                                    <TextBlock Text="{Binding ShippedDateDescription, Mode=OneTime}" FontSize="7" Foreground="White" VerticalAlignment="Center"></TextBlock>
                                                                                </Border>
                                                                            </StackPanel>
                                                                            <DockPanel  Visibility="{Binding RescheduledVisibility, Mode = OneTime}" Width="14" DockPanel.Dock="Right" >
                                                                                <Image HorizontalAlignment="Right" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="MouseEnter">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleEnter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Image}}}" />
                                                                                        </i:EventTrigger>
                                                                                        <i:EventTrigger EventName="MouseLeave">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleLeave, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"/>
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/clock.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                        </DockPanel>
                                                                    </Grid>
                                                                </Border>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </Border>
                                            <!-- Wednesday -->
                                            <Border Visibility="{Binding WednesdayVisibility, Mode=OneTime}" Padding="1,4,4,4" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="Transparent" AllowDrop="True" Tag="{Binding TagWE, Mode=OneTime}">
                                                <i:Interaction.Behaviors>
                                                    <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding DateWE, Mode=OneTime}" />
                                                    <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                </i:Interaction.Behaviors>
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="PreviewDrop">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DropRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True"  />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragEnter">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragOverRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragLeave">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragLeaveRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <ItemsControl ItemsSource="{Binding WednesdayRecords,Mode=OneTime}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <UniformGrid Rows="1"></UniformGrid>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border OpacityMask="{Binding OpacityMask, Mode=OneTime}" Background="{StaticResource PrimaryThemeColor}" Margin="2.5,0,0,0" CornerRadius="3" IsHitTestVisible="{Binding HitTestVisibility, Mode=OneWay}">
                                                                <!-- Drag -->
                                                                <i:Interaction.Behaviors>
                                                                    <Behaviors:PreviewMouseDownBorderBehavior Command="{Binding DataContext.DragRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"></Behaviors:PreviewMouseDownBorderBehavior>
                                                                </i:Interaction.Behaviors>
                                                                <Border BorderThickness="1" BorderBrush="{StaticResource PrimaryThemeColor}" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="{Binding Corner, Mode=OneTime}">
                                                                    <i:Interaction.Behaviors>
                                                                        <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"  CommandParameter="{Binding Mode=OneTime}" />
                                                                        <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                                    </i:Interaction.Behaviors>
                                                                    <Grid>
                                                                        <Grid.Resources>
                                                                            <Style TargetType="TextBlock">
                                                                                <Setter Property="FontFamily" Value="{StaticResource Bold}" />
                                                                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                                            </Style>
                                                                        </Grid.Resources>
                                                                        <StackPanel Margin="5,5,5,5" IsHitTestVisible="False">
                                                                            <TextBlock Text="{Binding IdDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding Plate,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding ShipTos,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding PaleteNumberDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                        </StackPanel>
                                                                        <!-- C-->
                                                                        <DockPanel LastChildFill="False">
                                                                            <DockPanel  Height="13" DockPanel.Dock="Top">
                                                                                <Image Visibility="{Binding NotificationAlertVisibility, Mode=OneTime}" Source="{Binding NotificationImageSource, Mode=OneTime}" Margin="-4,-8,0,0"  Height="10.5" Width="10.5" HorizontalAlignment="Center"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">

                                                                                </Image>
                                                                                 <Image Visibility="{Binding AddRecordVisibility, Mode=OneTime}" Margin="0,-3,-2,0" Height="13" Width="13" HorizontalAlignment="Right"  Stretch="Uniform" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="LowQuality">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/Plus.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                            <StackPanel Visibility="{Binding RecordBottomInfoVisibility, Mode=OneTime}" Orientation="Horizontal" HorizontalAlignment="Right" Height="14" DockPanel.Dock="Bottom" >
                                                                                <Image Visibility="{Binding CanceledVisibility, Mode=OneTime}" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/truck.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                                <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False">
                                                                                    <TextBlock Text="{Binding ShippedDateDescription, Mode=OneTime}" FontSize="7" Foreground="White" VerticalAlignment="Center"></TextBlock>
                                                                                </Border>
                                                                            </StackPanel>
                                                                            <DockPanel  Visibility="{Binding RescheduledVisibility, Mode = OneTime}" Width="14" DockPanel.Dock="Right" >
                                                                                <Image HorizontalAlignment="Right" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="MouseEnter">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleEnter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Image}}}" />
                                                                                        </i:EventTrigger>
                                                                                        <i:EventTrigger EventName="MouseLeave">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleLeave, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"/>
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/clock.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                        </DockPanel>
                                                                    </Grid>
                                                                </Border>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </Border>
                                            <!-- Thursday -->
                                            <Border Visibility="{Binding ThursdayVisibility, Mode=OneTime}" Padding="1,4,4,4" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="Transparent" AllowDrop="True" Tag="{Binding TagTH, Mode=OneTime}">
                                                <i:Interaction.Behaviors>
                                                    <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding DateTH, Mode=OneTime}" />
                                                    <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                </i:Interaction.Behaviors>
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="PreviewDrop">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DropRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True"  />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragEnter">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragOverRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragLeave">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragLeaveRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <ItemsControl ItemsSource="{Binding ThursdayRecords,Mode=OneTime}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <UniformGrid Rows="1"></UniformGrid>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border OpacityMask="{Binding OpacityMask, Mode=OneTime}" Background="{StaticResource PrimaryThemeColor}" Margin="2.5,0,0,0" CornerRadius="3" IsHitTestVisible="{Binding HitTestVisibility, Mode=OneWay}">
                                                                <!-- Drag -->
                                                                <i:Interaction.Behaviors>
                                                                    <Behaviors:PreviewMouseDownBorderBehavior Command="{Binding DataContext.DragRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"></Behaviors:PreviewMouseDownBorderBehavior>
                                                                </i:Interaction.Behaviors>
                                                                <Border BorderThickness="1" BorderBrush="{StaticResource PrimaryThemeColor}" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="{Binding Corner, Mode=OneTime}">
                                                                    <i:Interaction.Behaviors>
                                                                        <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"  CommandParameter="{Binding Mode=OneTime}" />
                                                                        <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                                    </i:Interaction.Behaviors>
                                                                    <Grid>
                                                                        <Grid.Resources>
                                                                            <Style TargetType="TextBlock">
                                                                                <Setter Property="FontFamily" Value="{StaticResource Bold}" />
                                                                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                                            </Style>
                                                                        </Grid.Resources>
                                                                        <StackPanel Margin="5,5,5,5" IsHitTestVisible="False">
                                                                            <TextBlock Text="{Binding IdDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding Plate,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding ShipTos,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding PaleteNumberDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                        </StackPanel>
                                                                        <!-- C-->
                                                                        <DockPanel LastChildFill="False">
                                                                            <DockPanel  Height="13" DockPanel.Dock="Top">
                                                                                <Image Visibility="{Binding NotificationAlertVisibility, Mode=OneTime}" Source="{Binding NotificationImageSource, Mode=OneTime}" Margin="-4,-8,0,0"  Height="10.5" Width="10.5" HorizontalAlignment="Center"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">

                                                                                </Image>
                                                                                 <Image Visibility="{Binding AddRecordVisibility, Mode=OneTime}" Margin="0,-3,-2,0" Height="13" Width="13" HorizontalAlignment="Right"  Stretch="Uniform" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="LowQuality">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/Plus.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                            <StackPanel Visibility="{Binding RecordBottomInfoVisibility, Mode=OneTime}" Orientation="Horizontal" HorizontalAlignment="Right" Height="14" DockPanel.Dock="Bottom" >
                                                                                <Image Visibility="{Binding CanceledVisibility, Mode=OneTime}" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/truck.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                                <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False">
                                                                                    <TextBlock Text="{Binding ShippedDateDescription, Mode=OneTime}" FontSize="7" Foreground="White" VerticalAlignment="Center"></TextBlock>
                                                                                </Border>
                                                                            </StackPanel>
                                                                            <DockPanel  Visibility="{Binding RescheduledVisibility, Mode = OneTime}" Width="14" DockPanel.Dock="Right" >
                                                                                <Image HorizontalAlignment="Right" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="MouseEnter">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleEnter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Image}}}" />
                                                                                        </i:EventTrigger>
                                                                                        <i:EventTrigger EventName="MouseLeave">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleLeave, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"/>
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/clock.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                        </DockPanel>
                                                                        <!-- <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False"> -->
                                                                    </Grid>
                                                                </Border>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </Border>
                                            <!-- Friday -->
                                            <Border Visibility="{Binding FridayVisibility, Mode=OneTime}" Padding="1,4,4,4" BorderThickness="0,0,1,1" BorderBrush="LightGray" Background="Transparent" AllowDrop="True" Tag="{Binding TagFR, Mode=OneTime}">
                                                <i:Interaction.Behaviors>
                                                    <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding DateFR, Mode=OneTime}" />
                                                    <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                </i:Interaction.Behaviors>
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="PreviewDrop">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DropRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True"  />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragEnter">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragOverRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragLeave">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragLeaveRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <ItemsControl ItemsSource="{Binding FridayRecords,Mode=OneTime}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <UniformGrid Rows="1"></UniformGrid>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border OpacityMask="{Binding OpacityMask, Mode=OneTime}" Background="{StaticResource PrimaryThemeColor}" Margin="2.5,0,0,0" CornerRadius="3" IsHitTestVisible="{Binding HitTestVisibility, Mode=OneWay}">
                                                                <!-- Drag -->
                                                                <i:Interaction.Behaviors>
                                                                    <Behaviors:PreviewMouseDownBorderBehavior Command="{Binding DataContext.DragRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"></Behaviors:PreviewMouseDownBorderBehavior>
                                                                </i:Interaction.Behaviors>
                                                                <Border BorderThickness="1" BorderBrush="{StaticResource PrimaryThemeColor}" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="{Binding Corner, Mode=OneTime}">
                                                                    <i:Interaction.Behaviors>
                                                                        <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"  CommandParameter="{Binding Mode=OneTime}" />
                                                                        <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                                    </i:Interaction.Behaviors>
                                                                    <Grid>
                                                                        <Grid.Resources>
                                                                            <Style TargetType="TextBlock">
                                                                                <Setter Property="FontFamily" Value="{StaticResource Bold}" />
                                                                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                                            </Style>
                                                                        </Grid.Resources>
                                                                        <StackPanel Margin="5,5,5,5" IsHitTestVisible="False">
                                                                            <TextBlock Text="{Binding IdDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding Plate,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding ShipTos,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding PaleteNumberDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                        </StackPanel>
                                                                        <!-- C-->
                                                                        <DockPanel LastChildFill="False">
                                                                            <DockPanel  Height="13" DockPanel.Dock="Top">
                                                                                <Image Visibility="{Binding NotificationAlertVisibility, Mode=OneTime}" Source="{Binding NotificationImageSource, Mode=OneTime}" Margin="-4,-8,0,0"  Height="10.5" Width="10.5" HorizontalAlignment="Center"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
    
                                                                                </Image>
                                                                                 <Image Visibility="{Binding AddRecordVisibility, Mode=OneTime}" Margin="0,-3,-2,0" Height="13" Width="13" HorizontalAlignment="Right"  Stretch="Uniform" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="LowQuality">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/Plus.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                            <StackPanel Visibility="{Binding RecordBottomInfoVisibility, Mode=OneTime}" Orientation="Horizontal" HorizontalAlignment="Right" Height="14" DockPanel.Dock="Bottom" >
                                                                                <Image Visibility="{Binding CanceledVisibility, Mode=OneTime}" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/truck.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                                <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False">
                                                                                    <TextBlock Text="{Binding ShippedDateDescription, Mode=OneTime}" FontSize="7" Foreground="White" VerticalAlignment="Center"></TextBlock>
                                                                                </Border>
                                                                            </StackPanel>
                                                                            <DockPanel  Visibility="{Binding RescheduledVisibility, Mode = OneTime}" Width="14" DockPanel.Dock="Right" >
                                                                                <Image HorizontalAlignment="Right" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="MouseEnter">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleEnter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Image}}}" />
                                                                                        </i:EventTrigger>
                                                                                        <i:EventTrigger EventName="MouseLeave">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleLeave, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"/>
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/clock.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                        </DockPanel>
                                                                    </Grid>
                                                                </Border>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </Border>
                                            <!-- Saturday -->
                                            <Border Visibility="{Binding SaturdayVisibility, Mode=OneTime}" Padding="1,4,4,4" BorderThickness="0,0,1,1" BorderBrush="LightGray" AllowDrop="True" Tag="{Binding TagST, Mode=OneTime}">
                                                <i:Interaction.Behaviors>
                                                    <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}"  CommandParameter="{Binding DateST, Mode=OneTime}" />
                                                    <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                </i:Interaction.Behaviors>
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="PreviewDrop">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DropRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True"  />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragEnter">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragOverRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                    <i:EventTrigger EventName="DragLeave">
                                                        <i:InvokeCommandAction Command="{Binding DataContext.DragLeaveRecord, RelativeSource={RelativeSource AncestorType=ListView}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ListView},  Mode=OneTime}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                                <Border.Background>
                                                    <ImageBrush ImageSource="/ShippingScheduleMVVM;component/Resources/Images/lines.png" />
                                                </Border.Background>
                                                <ItemsControl ItemsSource="{Binding SaturdayRecords,Mode=OneTime}">
                                                    <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <UniformGrid Rows="1"></UniformGrid>
                                                        </ItemsPanelTemplate>
                                                    </ItemsControl.ItemsPanel>
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <Border OpacityMask="{Binding OpacityMask, Mode=OneTime}" Background="{StaticResource PrimaryThemeColor}" Margin="2.5,0,0,0" CornerRadius="3" IsHitTestVisible="{Binding HitTestVisibility, Mode=OneWay}">
                                                                <!-- Drag -->
                                                                <i:Interaction.Behaviors>
                                                                    <Behaviors:PreviewMouseDownBorderBehavior Command="{Binding DataContext.DragRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" PassEventArgsToCommand="True" EventArgsConverter="{Binding DataContext.EventArgsConverter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}}" EventArgsConverterParameter="{Binding RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"></Behaviors:PreviewMouseDownBorderBehavior>
                                                                </i:Interaction.Behaviors>
                                                                <Border BorderThickness="1" BorderBrush="{StaticResource PrimaryThemeColor}" Background="{Binding BackgroundColor, Mode=OneTime}" CornerRadius="{Binding Corner, Mode=OneTime}">
                                                                    <i:Interaction.Behaviors>
                                                                        <Behaviors:DoubleClickBorderBehavior Command="{Binding DataContext.OpenUpdateRecordData, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"  CommandParameter="{Binding Mode=OneTime}" />
                                                                        <Behaviors:RightClickBorderBehavior Command="{Binding DataContext.RightClickRecord, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding DataContext,RelativeSource={RelativeSource AncestorType=Border}, Mode=OneTime}"/>
                                                                    </i:Interaction.Behaviors>
                                                                    <Grid>
                                                                        <Grid.Resources>
                                                                            <Style TargetType="TextBlock">
                                                                                <Setter Property="FontFamily" Value="{StaticResource Bold}" />
                                                                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                                                                            </Style>
                                                                        </Grid.Resources>
                                                                        <StackPanel Margin="5,5,5,5" IsHitTestVisible="False">
                                                                            <TextBlock Text="{Binding IdDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding Plate,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding ShipTos,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                            <TextBlock Text="{Binding PaleteNumberDescription,Mode=OneTime}" FontSize="7"></TextBlock>
                                                                        </StackPanel>
                                                                        <!-- C-->
                                                                        <DockPanel LastChildFill="False">
                                                                            <DockPanel  Height="13" DockPanel.Dock="Top">
                                                                                <Image Visibility="{Binding NotificationAlertVisibility, Mode=OneTime}" Source="{Binding NotificationImageSource, Mode=OneTime}" Margin="-4,-8,0,0"  Height="10.5" Width="10.5" HorizontalAlignment="Center"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">

                                                                                </Image>
                                                                                 <Image Visibility="{Binding AddRecordVisibility, Mode=OneTime}" Margin="0,-3,-2,0" Height="13" Width="13" HorizontalAlignment="Right"  Stretch="Uniform" IsHitTestVisible="False" RenderOptions.BitmapScalingMode="LowQuality">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/Plus.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                            <StackPanel Visibility="{Binding RecordBottomInfoVisibility, Mode=OneTime}" Orientation="Horizontal" HorizontalAlignment="Right" Height="14" DockPanel.Dock="Bottom" >
                                                                                <Image Visibility="{Binding CanceledVisibility, Mode=OneTime}" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/truck.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                                <Border Visibility="{Binding ShippedHourVisibility, Mode=OneTime}" Padding="3,0,3,0" Background="{StaticResource PrimaryThemeColor}" CornerRadius="2" BorderThickness="0" BorderBrush="{StaticResource PrimaryThemeColor}"  IsHitTestVisible="False">
                                                                                    <TextBlock Text="{Binding ShippedDateDescription, Mode=OneTime}" FontSize="7" Foreground="White" VerticalAlignment="Center"></TextBlock>
                                                                                </Border>
                                                                            </StackPanel>
                                                                            <DockPanel  Visibility="{Binding RescheduledVisibility, Mode = OneTime}" Width="14" DockPanel.Dock="Right" >
                                                                                <Image HorizontalAlignment="Right" Margin="1" Height="12" Width="12" VerticalAlignment="Bottom" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="False">
                                                                                    <i:Interaction.Triggers>
                                                                                        <i:EventTrigger EventName="MouseEnter">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleEnter, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Image}}}" />
                                                                                        </i:EventTrigger>
                                                                                        <i:EventTrigger EventName="MouseLeave">
                                                                                            <i:InvokeCommandAction Command="{Binding DataContext.RescheduleLeave, RelativeSource={RelativeSource AncestorType=ItemsControl, AncestorLevel=2}, Mode=OneTime}"/>
                                                                                        </i:EventTrigger>
                                                                                    </i:Interaction.Triggers>
                                                                                    <Image.Source>
                                                                                        <BitmapImage UriSource="/ShippingScheduleMVVM;component/Resources/Images/clock.png" />
                                                                                    </Image.Source>
                                                                                </Image>
                                                                            </DockPanel>
                                                                        </DockPanel>
                                                                    </Grid>
                                                                </Border>
                                                            </Border>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </Border>
                                        </UniformGrid>
                                    </Grid>

                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Border>


        <!-- Count Records Data Table -->
        <Border x:Name="WeeklyRecordsStatisticsTable" Grid.Row="9" Grid.RowSpan="2" Visibility="Collapsed" Margin="0,0,0,0" Grid.Column="1" Grid.ColumnSpan="2" BorderBrush="Lightgray" BorderThickness="1,0,1,1" CornerRadius="0,0,10,10" Background="White"  UseLayoutRounding="False">
            <Grid Margin="0,0,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.539*"></ColumnDefinition>
                    <ColumnDefinition Width="7*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                </Grid.RowDefinitions>

                <!-- Titles -->
                <Border Grid.Row="0" Grid.Column="0" BorderThickness="0,0,1,0" BorderBrush="LightGray" Background="#f9f9f9" CornerRadius="11,0,0,0" Padding="6,0,0,0">
                    <TextBlock Text="Pallets" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="8" FontFamily="{StaticResource Medium}"></TextBlock>
                </Border>
                <Border Grid.Row="1" Grid.Column="0" BorderThickness="0,1,1,0" BorderBrush="LightGray" Background="#f9f9f9" Padding="6,0,0,0">
                    <TextBlock Text="Regulars" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="8" FontFamily="{StaticResource Medium}"></TextBlock>
                </Border>
                <Border Grid.Row="2" Grid.Column="0" BorderThickness="0,1,1,0" BorderBrush="LightGray" Background="#f9f9f9" CornerRadius="0,0,0,10" Padding="6,0,0,0">
                    <TextBlock Text="Specials" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="8" FontFamily="{StaticResource Medium}"></TextBlock>
                </Border>

                <!-- Quantities -->
                <ItemsControl Grid.Column="1" Grid.RowSpan="3" ItemsSource="{Binding WeeklyRecordsStatistics}" Margin="0" UseLayoutRounding="False">
                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="ContentPresenter">
                            <Setter Property="Visibility" Value="{Binding Visibility}" />
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                    <ItemsControl.ItemTemplate >
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"></RowDefinition>
                                    <RowDefinition Height="*"></RowDefinition>
                                    <RowDefinition Height="*"></RowDefinition>
                                </Grid.RowDefinitions>
                                <Border Grid.Row="0" Grid.Column="0" BorderThickness="0,0,0,0" BorderBrush="LightGray">
                                    <TextBlock Text="{Binding PaletsNumber}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="8" FontFamily="{StaticResource Medium}"></TextBlock>
                                </Border>
                                <Border Grid.Row="1" Grid.Column="0" BorderThickness="0,1,0,0" BorderBrush="LightGray">
                                    <TextBlock Text="{Binding RegularsNumber}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="8" FontFamily="{StaticResource Medium}" ></TextBlock>
                                </Border>
                                <Border Grid.Row="2" Grid.Column="0" BorderThickness="0,1,0,0" BorderBrush="LightGray" >
                                    <TextBlock Text="{Binding SpecialsNumber}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="8" FontFamily="{StaticResource Medium}" ></TextBlock>
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <UniformGrid Rows="1"></UniformGrid>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>

            </Grid>
        </Border>

        
        <!-- Schedule Records Grid Front -->
        <Grid x:Name="ScheduleFrontLayer" Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2" Grid.RowSpan="7" >
            <Grid>
                <Border  x:Name="ScheduleFrontLayerCorner"  BorderThickness="1,0,1,1" BorderBrush="Lightgray" CornerRadius="0,0,25,25"></Border>
                <Grid x:Name="ScheduleFrontLayerCornerFill">
                    <Path Data="M52,26 A26,26 0 0 1 26,52 L52,52 Z" VerticalAlignment="Bottom"  HorizontalAlignment="Right" Fill="{Binding Brush}"/>
                    <Path Data="M26,52 A26,26 0 0 1 0,26 L0,52 Z" VerticalAlignment="Bottom"  HorizontalAlignment="Left" Fill="{Binding Brush}"/>
                </Grid>
                
                <Border x:Name="ExpandIcon" Grid.RowSpan="1" CornerRadius="3" HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="17" Height="17" Background="White" BorderThickness="1,1,1,1" BorderBrush="LightGray" Margin="0">
                    <Image x:Name="ExtRetImg" Margin="0,0,0,0" Height="11" Width="11"  Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality" Source="/Resources/Images/hidden.png" HorizontalAlignment="Center" VerticalAlignment="Center"  Cursor="Hand" MouseDown="ExtendRetractTable"/>
                </Border>
            </Grid>
        </Grid>
        
    </Grid>

</UserControl>
     